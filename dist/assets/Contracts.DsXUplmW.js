import{m as le,r as m,P as Qe,z as Ke,o as Xe,i as Ge,f as u,c as ne,a as N,h as e,t as n,v as b,k as Je,b as A,n as w,Q as Ye,R as Ze,F as I,g as O,j as $e,O as L,d as et,s as tt,e as c,M as Ee}from"./vendor.BJKvz4Yw.js";import{u as st,b as D,c as J}from"./index.DnUnV9d6.js";import{_ as ot}from"./MobileNav.CRat4cih.js";import{_ as at}from"./DesktopNav.BGZcsY3O.js";import{S as M}from"./SkeletonLoader.DhWxvyw4.js";import{g as lt}from"./coinLogos.gwK95kos.js";import{C as nt}from"./CustomSelect.aRdt6gUk.js";const rt={class:"min-h-screen"},it={class:"md:flex"},ct={class:"flex-1 pb-16 md:pb-0"},ut={class:"px-3 py-2 border-b border-white/10"},dt={class:"mb-2"},vt={class:"text-base font-bold text-white"},pt={class:"flex items-center gap-3 py-2"},mt={class:"flex-1 text-center text-white font-semibold text-base"},xt={class:"p-2 md:p-4"},ft={key:0,class:"flex flex-row gap-2 md:gap-3 items-stretch"},bt={class:"flex-1 min-w-0 max-w-[50%] flex flex-col gap-3"},ht={class:"flex-1 min-w-0 max-w-[50%] flex flex-col gap-3"},gt={key:1,class:"flex flex-row gap-2 md:gap-3 items-stretch"},wt={class:"flex-1 min-w-0 max-w-[50%] flex flex-col h-full"},yt={class:"flex gap-2 mb-3 items-center"},_t={class:"mb-2"},kt={class:"block text-xs text-white/70 mb-1"},Ct={class:"mb-2"},Tt={class:"flex items-center gap-1.5"},St={class:"mb-2"},Ft={class:"mb-3 space-y-0.5"},Nt={class:"flex justify-between text-xs"},Pt={class:"text-white truncate ml-2"},At={class:"flex justify-between text-xs"},Bt={class:"text-white/70"},Mt={class:"text-white truncate ml-2"},$t={class:"flex justify-between text-xs"},Et={class:"text-white truncate ml-2"},jt=["disabled"],Dt={class:"flex-1 min-w-0 max-w-[50%] flex flex-col h-full"},Ut={class:"flex gap-2 mb-3 items-center"},Rt={class:"flex-1 text-center"},Lt={class:"text-sm md:text-base font-bold text-blue-400 truncate"},zt={class:"mb-2"},It={class:"flex justify-between text-xs text-white/60 mb-1"},Ot={class:"space-y-0 max-h-32 md:max-h-48 overflow-y-auto"},qt=["onClick"],Ht={class:"relative z-10 text-red-400 font-medium text-xs truncate"},Vt={class:"relative z-10 text-white/70 text-xs truncate"},Wt={class:"border-t border-b border-white/10 py-1.5 my-1 text-center"},Qt={class:"text-xs font-bold text-blue-400 truncate"},Kt={class:"space-y-0 max-h-32 md:max-h-48 overflow-y-auto"},Xt=["onClick"],Gt={class:"relative z-10 text-blue-400 font-medium text-xs truncate"},Jt={class:"relative z-10 text-white/70 text-xs truncate"},Yt={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center p-3",style:{"z-index":"9999 !important"}},Zt={class:"flex items-center justify-between px-4 py-3 border-b border-white/5 bg-slate-900/80"},es={class:"text-sm font-semibold tracking-wide text-white"},ts={class:"flex flex-col items-center justify-center py-10 px-6 min-h-[280px]"},ss={key:0,class:"relative w-28 h-28 mb-5"},os={class:"w-28 h-28 transform -rotate-90",viewBox:"0 0 120 120"},as=["stroke-dashoffset"],ls={class:"absolute inset-0 flex items-center justify-center"},ns={class:"text-center"},rs={class:"text-4xl font-semibold text-white"},is={key:1,class:"text-center mb-5"},cs={key:2,class:"text-center mb-5"},us={class:"w-24 h-24 mx-auto mb-4 flex items-center justify-center"},ds={class:"text-center"},vs={key:0,class:"w-20 h-20 mx-auto mb-2 rounded-full bg-green-500/15 flex items-center justify-center"},ps={key:1,class:"w-20 h-20 mx-auto mb-2 rounded-full bg-red-500/15 flex items-center justify-center"},ms={class:"mt-1 text-xs text-white/60 whitespace-nowrap"},xs={class:"text-base font-semibold text-blue-400"},fs={key:3,class:"text-center mb-7"},bs={class:"text-lg font-semibold text-blue-400"},hs={class:"w-full space-y-0 px-5 pb-2"},gs={class:"flex justify-between items-center py-3 border-b border-white/5"},ws={class:"flex justify-between items-center py-3 border-b border-white/5"},ys={class:"text-sm font-medium text-white"},_s={class:"flex justify-between items-center py-3 border-b border-white/5"},ks={class:"text-sm font-medium text-white"},Cs={class:"flex justify-between items-center py-3"},Ts={class:"text-sm text-white/60"},Ss={class:"px-4 pb-4 pt-2"},Fs={class:"mt-3"},Ns={class:"flex gap-2 mb-4 border-b border-white/10"},Ps={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 bg-green-400"},As={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 bg-green-400"},Bs={key:0},Ms={key:0,class:"text-center py-12"},$s={class:"text-gray-400"},Es={key:1,class:"space-y-2"},js=["onClick"],Ds={class:"flex justify-between items-start mb-2"},Us={class:"flex items-center gap-2 mb-1"},Rs={class:"text-white/70 text-xs"},Ls={class:"text-xs text-white/60"},zs={class:"text-right"},Is={key:0,class:"text-lg font-bold text-green-400"},Os={key:1,class:"text-sm text-blue-400 flex items-center justify-end gap-1"},qs={class:"text-xs text-white/60 mt-1"},Hs={key:1},Vs={key:0,class:"text-center py-12"},Ws={class:"text-gray-400"},Qs={key:1,class:"space-y-2"},Ks={class:"flex justify-between items-start mb-2"},Xs={class:"flex items-center gap-2 mb-1"},Gs={class:"text-white/70 text-xs"},Js={key:0,class:"flex items-center gap-1 text-xs px-2 py-0.5 rounded bg-green-500/20 text-green-400"},Ys={key:1,class:"flex items-center gap-1 text-xs px-2 py-0.5 rounded bg-red-500/20 text-red-400"},Zs={class:"text-xs text-white/60"},eo={class:"text-right"},to={class:"text-xs text-white/60"},so={class:"relative glass-card w-full md:w-96 md:max-w-md rounded-b-2xl md:rounded-b-2xl shadow-2xl max-h-[80vh] flex flex-col animate-slide-up"},oo={class:"sticky top-0 glass-card-no-hover border-b border-white/10 px-4 py-4 z-10"},ao={class:"flex items-center justify-between"},lo={class:"flex-1 overflow-y-auto"},no=["onClick"],ro={class:"flex items-center gap-3 flex-1 min-w-0"},io=["src","alt"],co={class:"text-white font-medium"},uo={class:"flex items-center gap-4 flex-shrink-0"},vo={class:"text-white font-medium text-sm min-w-[80px] text-right"},Y="https://api.binance.com/api/v3",po="wss://stream.binance.com:9443/ws/!ticker@arr",mo=3e4,Co={__name:"Contracts",setup(xo){const{t:x}=st(),Z=Qe(),re=le(()=>window.innerWidth<768),C=m((()=>{if(Z.query.symbol){let s=Z.query.symbol.trim();return s.includes("/")||(s=s.replace(/USDT$/,"/USDT")),s}return"BTC/USDT"})()),B=m(Z.query.side==="sell"?"sell":"buy"),T=m(""),y=m("30"),$=m("transaction"),v=m(null),P=m({bids:[],asks:[]}),ee=m(0),q=m(!1),U=m(!1),ie=m([]),te=m(!0),S=m([]),se=m([]),f=m({}),g=m(!1),l=m(null),H=m(null),V=m(null),W=m(null),E=m({30:{minAmount:100,profitRate:10},60:{minAmount:1e3,profitRate:20},120:{minAmount:5e3,profitRate:30},180:{minAmount:2e4,profitRate:40},240:{minAmount:5e4,profitRate:50},300:{minAmount:1e5,profitRate:60}}),ce=le(()=>!E.value||!y.value?{minAmount:100,profitRate:10}:E.value[y.value]||{minAmount:100,profitRate:10}),je=async()=>{try{const s=await D.get("/contracts/settings");if(console.log("Raw settings response:",s.data),s.data&&s.data.settings){const t={};Object.keys(s.data.settings).forEach(r=>{const o=String(r),i=s.data.settings[r];t[o]={minAmount:parseFloat(i.minAmount)||100,profitRate:parseFloat(i.profitRate)||10}}),E.value=t,console.log("Contract trade settings loaded:",t),console.log("Current openTime:",y.value),console.log("Settings for current duration:",t[y.value])}else console.warn("No settings in response:",s.data)}catch(s){console.error("Error loading contract trade settings:",s)}},ue=["BTC","ETH","BNB","XRP","ADA","DOGE","DOT","LTC","BCH","ETC","NEO","IOTA","LUNA"];m(ue.map(s=>`${s}/USDT`));const F=s=>{if(s==null)return"0.00";const t=typeof s=="string"?parseFloat(s):s;return isNaN(t)?"0.00":t>=1?t.toFixed(2):t>=.01?t.toFixed(4):t.toFixed(8)},de=s=>s?parseFloat(s).toFixed(2):"0.00",ve=s=>{},pe=(s,t)=>{if(!P.value.bids.length||!P.value.asks.length)return 0;const r=t==="bid"?P.value.bids.map(i=>parseFloat(i.quantity)):P.value.asks.map(i=>parseFloat(i.quantity)),o=Math.max(...r);return o===0?0:parseFloat(s)/o*100},oe=async()=>{te.value=!0;const s=C.value.replace("/","");try{await Promise.all([De(s),me(s),xe()])}finally{te.value=!1}},De=async s=>{try{const t=await D.get(`/market/ticker/${s}/24h`);if(t.data&&t.data.price)v.value={...t.data,price:Number(t.data.price)||0,priceChangePercent:Number(t.data.priceChangePercent)||0,priceChange:Number(t.data.priceChange)||0,volume:Number(t.data.volume)||0,highPrice:Number(t.data.highPrice)||0,lowPrice:Number(t.data.lowPrice)||0};else try{const o=(await J.get(`${Y}/ticker/24hr`,{params:{symbol:s.toUpperCase()}})).data;v.value={price:Number(o.lastPrice)||0,priceChangePercent:Number(o.priceChangePercent)||0,priceChange:Number(o.priceChange)||0,volume:Number(o.volume)||0,highPrice:Number(o.highPrice)||0,lowPrice:Number(o.lowPrice)||0}}catch(r){console.error("Binance fallback failed:",r)}}catch(t){console.error("Error loading ticker:",t);try{const o=(await J.get(`${Y}/ticker/24hr`,{params:{symbol:s.toUpperCase()}})).data;v.value={price:Number(o.lastPrice)||0,priceChangePercent:Number(o.priceChangePercent)||0,priceChange:Number(o.priceChange)||0,volume:Number(o.volume)||0,highPrice:Number(o.highPrice)||0,lowPrice:Number(o.lowPrice)||0}}catch(r){console.error("Binance fallback failed:",r)}}},me=async s=>{var t,r;try{const o=await D.get(`/market/orderbook/${s}`,{params:{limit:20}});if(o.data&&(((t=o.data.bids)==null?void 0:t.length)>0||((r=o.data.asks)==null?void 0:r.length)>0))P.value=o.data;else try{const i=await J.get(`${Y}/depth`,{params:{symbol:s.toUpperCase(),limit:20}});P.value={bids:(i.data.bids||[]).map(([h,_])=>({price:Number(h)||0,quantity:Number(_)||0})),asks:(i.data.asks||[]).map(([h,_])=>({price:Number(h)||0,quantity:Number(_)||0})),timestamp:Date.now()}}catch(i){console.error("Binance orderbook fallback failed:",i)}}catch(o){console.error("Error loading order book:",o);try{const i=await J.get(`${Y}/depth`,{params:{symbol:s.toUpperCase(),limit:20}});P.value={bids:(i.data.bids||[]).map(([h,_])=>({price:Number(h)||0,quantity:Number(_)||0})),asks:(i.data.asks||[]).map(([h,_])=>({price:Number(h)||0,quantity:Number(_)||0})),timestamp:Date.now()}}catch(i){console.error("Binance orderbook fallback failed:",i)}}},xe=async()=>{var s,t,r;try{console.log("[Contracts] Loading contract account balance...");const o=await D.get("/wallet/balance",{params:{account_type:"contract"}});console.log("[Contracts] Contract account balance response:",o.data);const i=(s=o.data.balances)==null?void 0:s.find(h=>h.currency==="USDT");console.log("[Contracts] USDT contract balance found:",i),ee.value=(i==null?void 0:i.available)||0,console.log("[Contracts] Set walletBalance.value to:",ee.value)}catch(o){console.error("[Contracts] Error loading contract account balance:",o),console.error("[Contracts] Error response:",(t=o.response)==null?void 0:t.data),console.error("[Contracts] Error status:",(r=o.response)==null?void 0:r.status)}},Ue=async()=>{try{const s=ue.map(async r=>{try{const o=`${r}USDT`,i=await D.get(`/market/ticker/${o}/24h`);return i.data&&i.data.price?{symbol:`${r}/USDT`,price:i.data.price,change:i.data.priceChangePercent||0}:null}catch(o){return console.debug(`Failed to fetch ${r}:`,o.message),null}}),t=await Promise.all(s);ie.value=t.filter(Boolean).sort((r,o)=>r.symbol.localeCompare(o.symbol))}catch(s){console.error("Error loading coin list:",s)}},Re=s=>{C.value=s,U.value=!1,oe()},Le=s=>{const t=s.split("/")[0];return lt(t)||`https://via.placeholder.com/32?text=${t}`},ze=s=>{const t=s.target.alt.split("/")[0];s.target.src=`https://via.placeholder.com/32?text=${t}`},Ie=async()=>{var t,r,o,i,h,_;if(!T.value||parseFloat(T.value)<=0){alert("Please enter a valid opening quantity");return}if(!E.value||!E.value[y.value]){alert("Trade settings not loaded yet. Please wait a moment and try again.");return}const s=E.value[y.value];if(parseFloat(T.value)<s.minAmount){alert(`Minimum amount for ${y.value}s trade is ${s.minAmount} USDT`);return}q.value=!0;try{const k=await D.post("/contracts",{symbol:C.value,side:B.value,amount:parseFloat(T.value),duration:parseInt(y.value),entry_price:((t=v.value)==null?void 0:t.price)||5e4});console.log("Trade created:",k.data),T.value="";const d=k.data.trade;if(console.log("=== TRADE CREATED ==="),console.log("Full response:",k),console.log("Response data:",k.data),console.log("Created trade:",d),d){if(l.value={id:d.id,symbol:d.symbol||C.value,side:d.side||B.value,amount:parseFloat(d.amount)||parseFloat(T.value),duration:parseInt(d.duration)||parseInt(y.value),profit_rate:parseFloat(d.profit_rate)||((o=(r=E.value)==null?void 0:r[y.value])==null?void 0:o.profitRate)||10,entry_price:parseFloat(d.entry_price)||parseFloat((i=v.value)==null?void 0:i.price)||5e4,expires_at:d.expires_at,status:d.status||"pending"},g.value=!0,d.expires_at){const j=new Date(d.expires_at).getTime(),X=Date.now(),G=Math.floor((j-X)/1e3);f.value[d.id]=Math.max(0,G),console.log("Countdown initialized from expires_at:",f.value[d.id],"seconds")}else if(d.duration)f.value[d.id]=Math.max(0,parseInt(d.duration)),console.log("Countdown set from duration:",d.duration);else{const j=parseInt(y.value);f.value[d.id]=Math.max(0,j),console.log("Countdown set to selected duration:",j)}await tt(),console.log("=== MODAL STATE ==="),console.log("currentActiveTrade:",l.value),console.log("showActiveTradeModal:",g.value),console.log("Modal condition check:",!!l.value&&g.value),console.log("Countdown value:",f.value[d.id]),S.value.unshift(l.value)}else console.error("❌ No trade in response!"),console.error("Response:",k),console.error("Response data:",k.data),alert("Trade created but no trade data returned. Please check console.");oe(),Q()}catch(k){console.error("Error creating trade:",k),alert(((_=(h=k.response)==null?void 0:h.data)==null?void 0:_.error)||"Failed to create contract trade")}q.value=!1},Q=async()=>{try{const t=(await D.get("/contracts")).data.trades||[],r=Date.now();if(S.value=t.filter(o=>o.expires_at?new Date(o.expires_at).getTime()>r:!1),se.value=t.filter(o=>o.expires_at?new Date(o.expires_at).getTime()<=r:!1),S.value.forEach(o=>{if(o.expires_at){const i=new Date(o.expires_at).getTime(),h=Math.floor((i-r)/1e3);f.value[o.id]=Math.max(0,h)}}),S.value.length>0&&!g.value&&!l.value&&(l.value=S.value[0],g.value=!0),l.value&&g.value){const o=t.find(i=>i.id===l.value.id);o&&(l.value=o)}}catch(s){console.error("Error loading contract trades:",s)}},Oe=s=>{if(s<=0)return"00:00";const t=Math.floor(s/60),r=s%60;return`${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`},qe=s=>s?new Date(s).toLocaleString():"",ae=le(()=>{if(!l.value)return 0;const s=l.value.profit_rate/100;return parseFloat(l.value.amount)*s}),He=()=>{S.value.forEach(s=>{if(s.expires_at){const t=new Date(s.expires_at).getTime(),r=Date.now(),o=Math.floor((t-r)/1e3);f.value[s.id]=Math.max(0,o),o<=0&&f.value[s.id]===0&&setTimeout(()=>{Q()},2e3)}}),l.value&&f.value[l.value.id]!==void 0&&f.value[l.value.id]<0&&(f.value[l.value.id]=0)};Ke(()=>S.value.length,(s,t)=>{s>0&&!g.value&&(l.value=S.value[0],g.value=!0)});let p=null,R=null,K=1e3;const Ve=s=>{if(!(s!=null&&s.s))return;const t=s.s,r=C.value.replace("/","");t===r&&v.value&&(v.value.price=Number(s.c)||v.value.price,v.value.priceChangePercent=Number(s.P)||v.value.priceChangePercent,v.value.priceChange=Number(s.p)||v.value.priceChange,v.value.volume=Number(s.v)||v.value.volume,v.value.highPrice=Number(s.h)||v.value.highPrice,v.value.lowPrice=Number(s.l)||v.value.lowPrice)},fe=()=>{if((p==null?void 0:p.readyState)!==WebSocket.OPEN){try{p&&(p.onopen=null,p.onmessage=null,p.onerror=null,p.onclose=null,p.close())}catch(s){console.warn("[Contracts WS] Cleanup error:",s)}try{p=new WebSocket(po),p.onopen=()=>{console.log("[Contracts WS] Connected"),K=1e3},p.onmessage=s=>{try{const t=JSON.parse(s.data);Array.isArray(t)&&t.forEach(Ve)}catch(t){console.error("[Contracts WS] Parse error:",t)}},p.onerror=s=>{console.error("[Contracts WS] Error:",s)},p.onclose=s=>{console.warn("[Contracts WS] Closed:",s.code),p=null,be()}}catch(s){console.error("[Contracts WS] Setup error:",s),be()}}},be=()=>{R||(R=setTimeout(()=>{R=null,fe()},K),K=Math.min(K*2,mo))};return Xe(async()=>{await je(),oe(),Ue(),fe(),Q();let s=!1,t=0;H.value=setInterval(async()=>{if(!s){s=!0;try{const o=C.value.replace("/","");await me(o),t=(t+1)%3,t===0&&await xe()}catch(o){console.error("Error refreshing market data:",o)}finally{s=!1}}},5e3),V.value=setInterval(()=>{He()},1e3);let r=!1;W.value=setInterval(async()=>{if(!r){r=!0;try{await Q()}catch(o){console.error("Error loading contract trades:",o)}finally{r=!1}}},5e3)}),Ge(()=>{R&&(clearTimeout(R),R=null),H.value&&(clearInterval(H.value),H.value=null),V.value&&(clearInterval(V.value),V.value=null),W.value&&(clearInterval(W.value),W.value=null);try{p&&(p.onopen=null,p.onmessage=null,p.onerror=null,p.onclose=null,p.close(),p=null)}catch{}}),(s,t)=>{var r,o,i,h,_,k,d,j,X,G,he,ge,we,ye,_e,ke,Ce,Te,Se,Fe,Ne,Pe,Ae,Be,Me;return c(),u("div",rt,[re.value?(c(),ne(ot,{key:0})):N("",!0),e("div",it,[re.value?N("",!0):(c(),ne(at,{key:0})),e("main",ct,[e("div",ut,[e("div",dt,[e("h1",vt,n(b(x)("contracts.title")),1)]),e("div",pt,[e("button",{onClick:t[0]||(t[0]=a=>U.value=!0),class:"p-1.5 hover:opacity-80 transition-opacity"},[...t[16]||(t[16]=[e("svg",{class:"w-5 h-5 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),e("span",mt,n(C.value),1),e("button",{onClick:t[1]||(t[1]=a=>s.$router.push({path:"/kline",query:{symbol:C.value}})),class:"p-1.5 hover:opacity-80 transition-opacity"},[...t[17]||(t[17]=[Je('<svg class="w-5 h-5" viewBox="0 0 24 24" fill="none"><rect x="2" y="14" width="4" height="6" fill="#10B981"></rect><line x1="4" y1="12" x2="4" y2="14" stroke="#10B981" stroke-width="1.5" stroke-linecap="round"></line><line x1="4" y1="20" x2="4" y2="22" stroke="#10B981" stroke-width="1.5" stroke-linecap="round"></line><rect x="9" y="10" width="4" height="10" fill="#EF4444"></rect><line x1="11" y1="8" x2="11" y2="10" stroke="#EF4444" stroke-width="1.5" stroke-linecap="round"></line><line x1="11" y1="20" x2="11" y2="22" stroke="#EF4444" stroke-width="1.5" stroke-linecap="round"></line><rect x="16" y="14" width="4" height="6" fill="#10B981"></rect><line x1="18" y1="12" x2="18" y2="14" stroke="#10B981" stroke-width="1.5" stroke-linecap="round"></line><line x1="18" y1="20" x2="18" y2="22" stroke="#10B981" stroke-width="1.5" stroke-linecap="round"></line></svg>',1)])])])]),e("div",xt,[te.value?(c(),u("div",ft,[e("div",bt,[A(M,{type:"button"}),A(M,{type:"input"}),A(M,{type:"input"}),A(M,{type:"input"}),A(M,{type:"button"})]),e("div",ht,[A(M,{type:"button"}),A(M,{type:"order-book",rows:6}),t[18]||(t[18]=e("div",{class:"h-px bg-white/10 my-1"},null,-1)),A(M,{type:"order-book",rows:6})])])):(c(),u("div",gt,[e("div",wt,[e("div",yt,[e("button",{onClick:t[2]||(t[2]=a=>B.value="buy"),class:w(["flex-1 py-2 rounded-lg font-medium transition-colors",B.value==="buy"?"bg-green-500/20 text-green-300":"bg-white/5 text-white/60 hover:bg-white/10"])},n(b(x)("contracts.up")),3),e("button",{onClick:t[3]||(t[3]=a=>B.value="sell"),class:w(["flex-1 py-2 rounded-lg font-medium transition-colors",B.value==="sell"?"bg-red-500/20 text-red-300":"bg-white/5 text-white/60 hover:bg-white/10"])},n(b(x)("contracts.fall")),3)]),e("div",_t,[e("label",kt,n(b(x)("contracts.transactionMode")),1),t[19]||(t[19]=e("div",{class:"px-2 py-1.5 bg-white/5 border border-white/10 rounded-lg text-sm text-white"}," USDT ",-1))]),e("div",Ct,[t[21]||(t[21]=e("label",{class:"block text-xs text-white/70 mb-1"},"Opening quantity",-1)),e("div",Tt,[Ye(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>T.value=a),type:"number",step:"0.00000001",placeholder:"0.00",class:"flex-1 min-w-0 px-2 py-1.5 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-blue-500/50 text-sm text-white"},null,512),[[Ze,T.value]]),t[20]||(t[20]=e("span",{class:"text-white/70 text-xs whitespace-nowrap flex-shrink-0"},"USDT",-1))])]),e("div",St,[t[22]||(t[22]=e("label",{class:"block text-xs text-white/70 mb-1"},"Open time",-1)),A(nt,{modelValue:y.value,"onUpdate:modelValue":t[5]||(t[5]=a=>y.value=a),options:[{value:"30",label:"30 sec"},{value:"60",label:"60 sec"},{value:"120",label:"120 sec"},{value:"180",label:"180 sec"},{value:"240",label:"240 sec"},{value:"300",label:"300 sec"}]},null,8,["modelValue"])]),e("div",Ft,[e("div",Nt,[t[23]||(t[23]=e("span",{class:"text-white/70"},"Profit rate",-1)),e("span",Pt,n(ce.value.profitRate)+"%",1)]),e("div",At,[e("span",Bt,n(b(x)("contracts.minimumAmount")),1),e("span",Mt,n(ce.value.minAmount.toFixed(2))+" USDT",1)]),e("div",$t,[t[24]||(t[24]=e("span",{class:"text-white/70"},"Usable",-1)),e("span",Et,n(F(ee.value))+" USDT",1)])]),e("button",{onClick:Ie,disabled:q.value||!T.value||parseFloat(T.value)<=0,class:w(["w-full py-2.5 rounded-lg font-bold text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm",B.value==="buy"?"bg-green-500 hover:bg-green-600 active:bg-green-700":"bg-red-500 hover:bg-red-600 active:bg-red-700"])},n(q.value?b(x)("common.processing"):`${B.value==="buy"?b(x)("contracts.up"):b(x)("contracts.fall")} ${C.value.split("/")[0]}`),11,jt)]),e("div",Dt,[e("div",Ut,[t[25]||(t[25]=e("div",{class:"flex-1"},null,-1)),e("div",Rt,[e("div",Lt,n(F(((r=v.value)==null?void 0:r.price)||0))+" USDT",1)]),t[26]||(t[26]=e("div",{class:"flex-1"},null,-1))]),e("div",zt,[e("div",It,[e("span",null,n(b(x)("contracts.price")),1),e("span",null,n(b(x)("contracts.quantity")),1)]),e("div",Ot,[(c(!0),u(I,null,O(P.value.asks.slice(0,6).reverse(),(a,z)=>(c(),u("div",{key:`ask-${z}`,class:"relative flex justify-between items-center text-xs cursor-pointer hover:bg-white/5 py-0.5 px-1",onClick:We=>ve(a.price)},[e("div",{class:"absolute left-0 top-0 bottom-0 bg-red-500/10 transition-all",style:Ee({width:`${pe(a.quantity,"ask")}%`})},null,4),e("span",Ht,n(F(a.price)),1),e("span",Vt,n(de(a.quantity)),1)],8,qt))),128))])]),e("div",Wt,[e("div",Qt,n(F(((o=v.value)==null?void 0:o.price)||0))+" USDT",1)]),e("div",null,[e("div",Kt,[(c(!0),u(I,null,O(P.value.bids.slice(0,6),(a,z)=>(c(),u("div",{key:`bid-${z}`,class:"relative flex justify-between items-center text-xs cursor-pointer hover:bg-white/5 py-0.5 px-1",onClick:We=>ve(a.price)},[e("div",{class:"absolute left-0 top-0 bottom-0 bg-blue-500/10 transition-all",style:Ee({width:`${pe(a.quantity,"bid")}%`})},null,4),e("span",Gt,n(F(a.price)),1),e("span",Jt,n(de(a.quantity)),1)],8,Xt))),128))])])])])),(c(),ne(et,{to:"body"},[l.value&&g.value?(c(),u("div",Yt,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[6]||(t[6]=a=>g.value=!1)}),e("div",{class:"relative bg-gradient-to-b from-slate-900 via-slate-900 to-slate-950 rounded-2xl w-full max-w-sm shadow-2xl z-[10000] border border-white/10 overflow-hidden",onClick:t[10]||(t[10]=$e(()=>{},["stop"]))},[e("div",Zt,[e("button",{onClick:t[7]||(t[7]=a=>g.value=!1),class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...t[27]||(t[27]=[e("svg",{class:"w-4 h-4 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),e("h2",es,n(((i=l.value)==null?void 0:i.symbol)||C.value),1),e("button",{onClick:t[8]||(t[8]=a=>g.value=!1),class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...t[28]||(t[28]=[e("svg",{class:"w-4 h-4 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",ts,[(f.value[(h=l.value)==null?void 0:h.id]||0)>0?(c(),u("div",ss,[(c(),u("svg",os,[t[29]||(t[29]=e("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"rgba(255,255,255,0.1)","stroke-width":"8"},null,-1)),e("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#3B82F6","stroke-width":"8","stroke-dasharray":"339.292","stroke-dashoffset":339.292-339.292*(f.value[(_=l.value)==null?void 0:_.id]||0)/(((k=l.value)==null?void 0:k.duration)||30),"stroke-linecap":"round",class:"transition-all duration-1000"},null,8,as)])),e("div",ls,[e("div",ns,[e("div",rs,n(f.value[(d=l.value)==null?void 0:d.id]||0),1)])])])):(f.value[(j=l.value)==null?void 0:j.id]||0)<=0&&!((X=l.value)!=null&&X.result)?(c(),u("div",is,[...t[30]||(t[30]=[e("div",{class:"w-24 h-24 mx-auto mb-4 flex items-center justify-center"},[e("div",{class:"text-center"},[e("svg",{class:"w-10 h-10 text-blue-400 mx-auto mb-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})]),e("div",{class:"text-sm font-medium text-blue-400"},"Analyzing trading data...")])],-1)])])):(G=l.value)!=null&&G.result?(c(),u("div",cs,[e("div",us,[e("div",ds,[l.value.result==="win"?(c(),u("div",vs,[...t[31]||(t[31]=[e("svg",{class:"w-10 h-10 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):l.value.result==="lose"?(c(),u("div",ps,[...t[32]||(t[32]=[e("svg",{class:"w-10 h-10 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)])])):N("",!0),e("div",{class:w(["text-xl font-bold tracking-wide",{"text-green-400":l.value.result==="win","text-red-400":l.value.result==="lose"}])},n(l.value.result.toUpperCase()),3),e("div",{class:w(["text-lg font-semibold mt-2 whitespace-nowrap",{"text-green-400":parseFloat(l.value.profit_loss||0)>0,"text-red-400":parseFloat(l.value.profit_loss||0)<0}])},n(parseFloat(l.value.profit_loss||0)>0?"+":"")+n(parseFloat(l.value.profit_loss||0).toFixed(2))+" USDT ",3),e("div",ms,[t[33]||(t[33]=L(" Now price - ",-1)),e("span",xs,n(F(((he=v.value)==null?void 0:he.price)||((ge=l.value)==null?void 0:ge.entry_price)||0)),1)])])])])):N("",!0),(f.value[(we=l.value)==null?void 0:we.id]||0)>0&&!((ye=l.value)!=null&&ye.result)?(c(),u("div",fs,[t[34]||(t[34]=e("div",{class:"text-xs text-white/50 mb-0.5"},"Now price",-1)),e("div",bs,n(F(((_e=v.value)==null?void 0:_e.price)||((ke=l.value)==null?void 0:ke.entry_price)||0)),1)])):N("",!0),e("div",hs,[e("div",gs,[t[35]||(t[35]=e("span",{class:"text-sm text-white/60"},"Direction:",-1)),e("span",{class:w(["text-sm font-semibold",((Ce=l.value)==null?void 0:Ce.side)==="buy"?"text-green-400":"text-red-400"])},n(((Te=l.value)==null?void 0:Te.side)==="buy"?b(x)("contracts.up"):b(x)("contracts.fall")),3)]),e("div",ws,[t[36]||(t[36]=e("span",{class:"text-sm text-white/60"},"Opening quantity:",-1)),e("span",ys,n(parseFloat(((Se=l.value)==null?void 0:Se.amount)||0).toFixed(2))+" USDT",1)]),e("div",_s,[t[37]||(t[37]=e("span",{class:"text-sm text-white/60"},"Purchase price:",-1)),e("span",ks,n(F(((Fe=l.value)==null?void 0:Fe.entry_price)||0)),1)]),e("div",Cs,[e("span",Ts,n(((Ne=l.value)==null?void 0:Ne.status)==="completed"?"Profit and loss:":"Estimated profit and loss:"),1),e("span",{class:w(["text-sm font-semibold",((Pe=l.value)==null?void 0:Pe.status)==="completed"?parseFloat(l.value.profit_loss||0)>=0?"text-green-400":"text-red-400":ae.value>=0?"text-green-400":"text-red-400"])},n(((Ae=l.value)==null?void 0:Ae.status)==="completed"?(parseFloat(l.value.profit_loss||0)>0?"+":"")+parseFloat(l.value.profit_loss||0).toFixed(2)+" USDT":(ae.value>=0?"+":"")+ae.value.toFixed(2)+" USDT"),3)])])]),e("div",Ss,[e("button",{onClick:t[9]||(t[9]=a=>g.value=!1),class:w(["w-full py-3.5 text-white rounded-xl text-sm font-semibold transition-all shadow-lg",((Be=l.value)==null?void 0:Be.status)==="completed"?"bg-green-500/90 hover:bg-green-500 hover:shadow-green-500/50":"bg-blue-500/90 hover:bg-blue-500 hover:shadow-blue-500/50"])},n(((Me=l.value)==null?void 0:Me.status)==="completed"?"OK":"Back"),3)])])])):N("",!0)])),e("div",Fs,[e("div",Ns,[e("button",{onClick:t[11]||(t[11]=a=>$.value="transaction"),class:w(["px-4 py-2 text-sm font-medium transition-all relative",$.value==="transaction"?"text-green-400":"text-gray-400"])},[t[38]||(t[38]=L(" Current ",-1)),$.value==="transaction"?(c(),u("span",Ps)):N("",!0)],2),e("button",{onClick:t[12]||(t[12]=a=>$.value="closed"),class:w(["px-4 py-2 text-sm font-medium transition-all relative",$.value==="closed"?"text-green-400":"text-gray-400"])},[t[39]||(t[39]=L(" History ",-1)),$.value==="closed"?(c(),u("span",As)):N("",!0)],2)]),$.value==="transaction"?(c(),u("div",Bs,[S.value.length===0?(c(),u("div",Ms,[t[40]||(t[40]=e("svg",{class:"w-16 h-16 text-gray-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),e("p",$s,n(b(x)("contracts.noHistory")),1)])):(c(),u("div",Es,[(c(!0),u(I,null,O(S.value,a=>(c(),u("div",{key:a.id,onClick:z=>{l.value=a,g.value=!0},class:"bg-white/5 rounded-lg p-3 border border-white/10 cursor-pointer hover:bg-white/10 transition-colors"},[e("div",Ds,[e("div",null,[e("div",Us,[e("span",{class:w(["text-sm font-bold",a.side==="buy"?"text-green-400":"text-red-400"])},n(a.side==="buy"?b(x)("contracts.up"):b(x)("contracts.fall")),3),e("span",Rs,n(a.symbol),1)]),e("div",Ls,n(parseFloat(a.amount).toFixed(2))+" USDT • "+n(a.duration)+"s • "+n(a.profit_rate)+"% ",1)]),e("div",zs,[(f.value[a.id]||0)>0?(c(),u("div",Is,n(Oe(f.value[a.id]||0)),1)):(c(),u("div",Os,[...t[41]||(t[41]=[e("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),L(" Analyzing trading data... ",-1)])])),e("div",qs,"Entry: "+n(F(a.entry_price)),1)])])],8,js))),128))]))])):(c(),u("div",Hs,[se.value.length===0?(c(),u("div",Vs,[t[42]||(t[42]=e("svg",{class:"w-16 h-16 text-gray-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),e("p",Ws,n(b(x)("contracts.noHistory")),1)])):(c(),u("div",Qs,[(c(!0),u(I,null,O(se.value,a=>(c(),u("div",{key:a.id,class:"bg-white/5 rounded-lg p-3 border border-white/10"},[e("div",Ks,[e("div",null,[e("div",Xs,[e("span",{class:w(["text-sm font-bold",a.side==="buy"?"text-green-400":"text-red-400"])},n(a.side==="buy"?b(x)("contracts.up"):b(x)("contracts.fall")),3),e("span",Gs,n(a.symbol),1),a.result==="win"?(c(),u("span",Js,[...t[43]||(t[43]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),L(" WIN ",-1)])])):a.result==="lose"?(c(),u("span",Ys,[...t[44]||(t[44]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1),L(" LOSE ",-1)])])):N("",!0)]),e("div",Zs,n(parseFloat(a.amount).toFixed(2))+" USDT • "+n(a.duration)+"s • "+n(a.profit_rate)+"% ",1)]),e("div",eo,[e("div",{class:w(["text-lg font-bold",{"text-green-400":parseFloat(a.profit_loss)>0,"text-red-400":parseFloat(a.profit_loss)<0,"text-white/60":parseFloat(a.profit_loss)===0}])},n(parseFloat(a.profit_loss)>0?"+":"")+n(parseFloat(a.profit_loss).toFixed(2))+" USDT ",3),e("div",to,n(qe(a.created_at)),1)])])]))),128))]))]))])])])]),U.value?(c(),u("div",{key:1,class:"fixed inset-0 z-50 flex items-end md:items-center md:justify-center",onClick:t[15]||(t[15]=$e(a=>U.value=!1,["self"]))},[e("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t[13]||(t[13]=a=>U.value=!1)}),e("div",so,[e("div",oo,[e("div",ao,[t[46]||(t[46]=e("h2",{class:"text-lg font-bold text-white"},"USDT",-1)),e("button",{onClick:t[14]||(t[14]=a=>U.value=!1),class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...t[45]||(t[45]=[e("svg",{class:"w-5 h-5 text-white/70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",lo,[(c(!0),u(I,null,O(ie.value,a=>(c(),u("div",{key:a.symbol,onClick:z=>Re(a.symbol),class:"flex items-center justify-between px-4 py-3 hover:bg-white/5 active:bg-white/10 transition-colors cursor-pointer border-b border-white/10"},[e("div",ro,[e("img",{src:Le(a.symbol),alt:a.symbol,class:"w-8 h-8 rounded-full flex-shrink-0",onError:ze},null,40,io),e("span",co,n(a.symbol.split("/")[0]),1)]),e("div",uo,[e("span",{class:w(["text-sm font-medium",a.change>=0?"text-green-400":"text-red-400"])},n(a.change>=0?"+":"")+n(a.change.toFixed(2))+"% ",3),e("span",vo,n(F(a.price)),1)])],8,no))),128))])])])):N("",!0)])}}};export{Co as default};
