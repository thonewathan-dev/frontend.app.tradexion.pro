import{l as g,r as d,g as O,b as i,c as V,I as h,f as e,t as l,K as v,O as P,P as W,n as z,J as _,F as j,d as M,o as n}from"./vendor-QOrkcOk8.js";import{u as J,b as B}from"./index-wX3mV7sr.js";import{_ as K,a as U}from"./DesktopNav-y0IF6Y0_.js";import{a as G}from"./coinLogos-BjOeNWjs.js";const R={class:"min-h-screen"},X={class:"md:flex"},Y={class:"flex-1 pb-16 md:pb-0"},Z={class:"glass-card-no-hover border-b border-white/10 px-4 py-3"},ee={class:"flex items-center justify-between"},te={class:"flex items-center gap-3"},se={class:"text-lg font-bold text-white"},oe={class:"p-4"},le={class:"glass-card rounded-xl p-4 space-y-4"},ne={class:"block text-xs text-white/60 mb-2"},re={class:"flex items-center justify-between pb-3 border-b border-white/10"},ie={class:"flex items-center gap-3"},ae={class:"text-white font-semibold text-lg"},de={class:"flex items-center gap-2"},ue={class:"text-white/70 text-sm"},ce={class:"block text-xs text-white/60 mb-2"},ve={class:"flex items-center justify-between pb-3 border-b border-white/10"},he={class:"flex items-center gap-3"},xe={class:"text-white font-semibold text-lg"},we={class:"block text-xs text-white/60 mb-2"},fe={class:"flex items-center gap-2 mb-2"},be={class:"flex items-center gap-1 border-l border-white/20 pl-2"},pe={class:"text-white/60 text-sm mt-1"},me=["disabled"],ke={class:"glass-card rounded-t-xl md:rounded-xl w-full max-w-md max-h-[80vh] overflow-y-auto animate-slide-up"},ge={class:"sticky top-0 glass-card-no-hover border-b border-white/10 p-4 flex justify-between items-center"},ye={class:"p-2"},Ce=["onClick"],_e={class:"text-white font-medium"},je={key:0,class:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Me={class:"glass-card rounded-t-xl md:rounded-xl w-full max-w-md max-h-[80vh] overflow-y-auto animate-slide-up"},Be={class:"sticky top-0 glass-card-no-hover border-b border-white/10 p-4 flex justify-between items-center"},$e={class:"p-2"},Ee=["onClick"],Fe={class:"text-white font-medium"},Le={key:0,class:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Se={class:"glass-card rounded-t-xl md:rounded-xl w-full max-w-md max-h-[80vh] overflow-y-auto animate-slide-up"},Ve={class:"sticky top-0 glass-card-no-hover border-b border-white/10 p-4 flex justify-between items-center"},ze={class:"text-lg font-bold text-white"},He={class:"p-4"},Ne={class:"flex justify-between items-start mb-2"},Ae={class:"text-white font-medium"},De={class:"text-white/60 text-sm"},Te={class:"text-white/70 text-sm"},Ie={key:0,class:"text-center text-white/60 py-8"},Je={__name:"FlashExchange",setup(Qe){const{t:c}=J(),$=g(()=>window.innerWidth<768),a=d("NEO"),u=d("SNT"),r=d(""),y=d("currency"),b=d(!1),x=d(!1),w=d(!1),H=d(!1),p=d(!1),E=d([]),m=d([]),F=g(()=>G()),C=g(()=>{const o=E.value.find(t=>t.currency===a.value);return o?o.balance:0}),N=g(()=>!r.value||parseFloat(r.value)<=0?0:parseFloat(r.value)),f=o=>{const t=parseFloat(o);return t>=1?t.toFixed(2):t>=.01?t.toFixed(4):t.toFixed(8)},A=o=>o?new Date(o).toLocaleString():"N/A",D=o=>{o===u.value&&(u.value=a.value),a.value=o,x.value=!1,k()},T=o=>{o===a.value&&(a.value=u.value),u.value=o,w.value=!1},I=()=>{const o=a.value;a.value=u.value,u.value=o,k()},L=o=>{y.value=o,o==="all"&&(r.value=f(C.value))},k=async()=>{try{const o=await B.get("/wallet");E.value=o.data.wallets||[]}catch(o){console.error("Error loading wallets:",o)}},S=async()=>{try{const o=await B.get("/exchange/history").catch(()=>({data:{exchanges:[]}}));m.value=o.data.exchanges||[]}catch(o){console.error("Error loading exchange history:",o),m.value=[]}},Q=async()=>{var o,t;if(!r.value||parseFloat(r.value)<=0){alert("Please enter a valid exchange quantity");return}if(parseFloat(r.value)>C.value){alert("Insufficient balance");return}b.value=!0;try{await B.post("/exchange",{fromCurrency:a.value,toCurrency:u.value,amount:parseFloat(r.value)}),alert("Exchange completed successfully!"),r.value="",k(),S()}catch(s){alert(((t=(o=s.response)==null?void 0:o.data)==null?void 0:t.error)||"Exchange failed")}b.value=!1};return O(()=>{k(),S()}),(o,t)=>(n(),i("div",R,[$.value?(n(),V(K,{key:0})):h("",!0),e("div",X,[$.value?h("",!0):(n(),V(U,{key:0})),e("main",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("button",{onClick:t[0]||(t[0]=s=>o.$router.back()),class:"p-1.5 hover:bg-white/10 rounded-lg transition-colors"},[...t[14]||(t[14]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("h1",se,l(v(c)("flashExchange.title")),1)]),e("button",{onClick:t[1]||(t[1]=s=>p.value=!0),class:"p-1.5 hover:bg-white/10 rounded-lg transition-colors"},[...t[15]||(t[15]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])])])]),e("div",oe,[e("div",le,[e("div",null,[e("label",ne,l(v(c)("flashExchange.from")),1),e("div",re,[e("div",ie,[e("span",ae,l(a.value),1),e("button",{onClick:t[2]||(t[2]=s=>x.value=!0),class:"p-1 hover:bg-white/10 rounded transition-colors"},[...t[16]||(t[16]=[e("svg",{class:"w-5 h-5 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])])]),e("div",de,[e("span",ue,l(f(C.value)),1),e("button",{onClick:t[3]||(t[3]=s=>H.value=!0),class:"p-1 hover:bg-white/10 rounded transition-colors"},[...t[17]||(t[17]=[e("svg",{class:"w-5 h-5 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])])])])]),e("div",{class:"flex justify-center py-2"},[e("button",{onClick:I,class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...t[18]||(t[18]=[e("svg",{class:"w-6 h-6 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})],-1)])])]),e("div",null,[e("label",ce,l(v(c)("flashExchange.to")),1),e("div",ve,[e("div",he,[e("span",xe,l(u.value),1),e("button",{onClick:t[4]||(t[4]=s=>w.value=!0),class:"p-1 hover:bg-white/10 rounded transition-colors"},[...t[19]||(t[19]=[e("svg",{class:"w-5 h-5 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])])])])]),e("div",null,[e("label",we,l(v(c)("flashExchange.exchangeQuantity")),1),e("div",fe,[P(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.value=s),type:"number",step:"0.00000001",class:"flex-1 px-4 py-3 glass-input rounded-lg focus:outline-none text-white",placeholder:"0.00"},null,512),[[W,r.value]]),e("div",be,[e("button",{onClick:t[6]||(t[6]=s=>L("currency")),class:z(["px-3 py-1 rounded text-sm transition-colors",y.value==="currency"?"bg-white/20 text-white":"text-white/60 hover:text-white"])},l(a.value),3),t[20]||(t[20]=e("span",{class:"text-white/40"},"|",-1)),e("button",{onClick:t[7]||(t[7]=s=>L("all")),class:z(["px-3 py-1 rounded text-sm transition-colors",y.value==="all"?"bg-white/20 text-white":"text-white/60 hover:text-white"])},l(v(c)("flashExchange.all")),3)])]),e("div",pe,l(u.value)+": "+l(f(N.value)),1)]),e("button",{onClick:Q,disabled:b.value||!r.value||parseFloat(r.value)<=0,class:"w-full py-4 bg-blue-500/30 hover:bg-blue-500/40 border border-blue-500/50 rounded-lg font-bold text-white text-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"},l(b.value?v(c)("common.processing"):v(c)("flashExchange.exchange")),9,me)])])])]),x.value?(n(),i("div",{key:1,class:"fixed inset-0 bg-black/50 z-50 flex items-end md:items-center justify-center p-4",onClick:t[9]||(t[9]=_(s=>x.value=!1,["self"]))},[e("div",ke,[e("div",ge,[t[22]||(t[22]=e("h2",{class:"text-lg font-bold text-white"},"Select currency",-1)),e("button",{onClick:t[8]||(t[8]=s=>x.value=!1),class:"text-white/70 hover:text-white"},[...t[21]||(t[21]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",ye,[(n(!0),i(j,null,M(F.value,s=>(n(),i("button",{key:s,onClick:q=>D(s),class:"w-full flex items-center justify-between p-4 border-b border-white/10 last:border-b-0 hover:bg-white/5 transition-colors"},[e("span",_e,l(s),1),a.value===s?(n(),i("svg",je,[...t[23]||(t[23]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):h("",!0)],8,Ce))),128))])])])):h("",!0),w.value?(n(),i("div",{key:2,class:"fixed inset-0 bg-black/50 z-50 flex items-end md:items-center justify-center p-4",onClick:t[11]||(t[11]=_(s=>w.value=!1,["self"]))},[e("div",Me,[e("div",Be,[t[25]||(t[25]=e("h2",{class:"text-lg font-bold text-white"},"Select currency",-1)),e("button",{onClick:t[10]||(t[10]=s=>w.value=!1),class:"text-white/70 hover:text-white"},[...t[24]||(t[24]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",$e,[(n(!0),i(j,null,M(F.value.filter(s=>s!==a.value),s=>(n(),i("button",{key:s,onClick:q=>T(s),class:"w-full flex items-center justify-between p-4 border-b border-white/10 last:border-b-0 hover:bg-white/5 transition-colors"},[e("span",Fe,l(s),1),u.value===s?(n(),i("svg",Le,[...t[26]||(t[26]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):h("",!0)],8,Ee))),128))])])])):h("",!0),p.value?(n(),i("div",{key:3,class:"fixed inset-0 bg-black/50 z-50 flex items-end md:items-center justify-center p-4",onClick:t[13]||(t[13]=_(s=>p.value=!1,["self"]))},[e("div",Se,[e("div",Ve,[e("h2",ze,l(v(c)("flashExchange.history")),1),e("button",{onClick:t[12]||(t[12]=s=>p.value=!1),class:"text-white/70 hover:text-white"},[...t[27]||(t[27]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",He,[(n(!0),i(j,null,M(m.value,s=>(n(),i("div",{key:s.id,class:"p-4 border-b border-white/10 last:border-b-0"},[e("div",Ne,[e("div",null,[e("div",Ae,l(s.fromCurrency)+" â†’ "+l(s.toCurrency),1),e("div",De,l(A(s.created_at)),1)]),t[28]||(t[28]=e("span",{class:"px-2 py-1 rounded text-xs bg-green-500/20 text-green-300"}," Completed ",-1))]),e("div",Te,l(f(s.amount))+" "+l(s.fromCurrency)+" = "+l(f(s.receivedAmount))+" "+l(s.toCurrency),1)]))),128)),m.value.length===0?(n(),i("div",Ie,l(v(c)("flashExchange.noHistory")),1)):h("",!0)])])])):h("",!0)]))}};export{Je as default};
