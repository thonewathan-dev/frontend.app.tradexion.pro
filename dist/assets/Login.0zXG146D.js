import{r as s,m as E,o as D,P as O,s as k,i as X,z as J,f as w,h as t,b as v,a as K,v as _,w as C,u as Y,n as L,j as S,Q as g,R as T,S as Q,t as j,k as Z,N as ee,e as f,O as P}from"./vendor.BJKvz4Yw.js";import{_ as te}from"./AuthMarketPanel.Dp_fc3IN.js";import{_ as oe}from"./SiteFooter.BaLxjuH9.js";import{u as se,a as le,g as ie}from"./index.DnUnV9d6.js";import"./coinLogos.gwK95kos.js";const ne={class:"min-h-[100dvh] overflow-hidden bg-gradient-to-br from-slate-950 via-slate-900 to-indigo-950 text-white flex flex-col"},re={class:"sticky top-0 z-10 glass-card-no-hover border-b border-white/10"},ae={class:"max-w-5xl mx-auto px-4 h-14 flex items-center justify-between"},de={class:"flex items-center gap-2"},ue=["src"],ce={class:"flex-1 max-w-5xl mx-auto w-full px-4 pt-6 pb-8 md:pt-10 md:pb-10 md:flex md:items-center"},we={class:"grid md:grid-cols-2 gap-6 md:gap-10 items-start w-full"},fe={class:"hidden md:block"},pe={class:"min-w-0"},ve={class:"flex gap-6 text-sm font-semibold mb-3"},me={class:"glass-card-no-hover rounded-xl border border-white/12 p-3"},he={key:0,class:"space-y-2.5"},be=["disabled"],xe={key:1,class:"space-y-2.5"},ge=["value"],ye={class:"flex justify-end"},ke={class:"flex justify-center pt-1"},_e=["disabled"],Ce={class:"flex items-center gap-2 rounded-lg border border-white/15 bg-white/5 px-3 py-2 text-sm focus-within:ring-2 focus-within:ring-white/20 focus-within:border-white/25"},Te=["disabled"],Pe={class:"mt-3 mb-4 mb-safe text-center text-xs text-white/70"},Ie={key:0,class:"fixed inset-0 z-50 flex items-center justify-center px-4"},Me={class:"relative w-full max-w-sm glass-card-no-hover rounded-xl border border-white/12 p-4"},Ue={class:"mt-4 flex gap-3"},Ae="0x4AAAAAACNscU1_JGFhgUPj",Ve={__name:"Login",setup(Ne){const{t:I}=se(),M=ee(),V=O(),z=le(),U=s(null),l=s("");let a=null;const B=new URL("/assets/Logo-Only.Bi7kxCKJ.png",import.meta.url).href;new Date().getFullYear();const n=s(""),u=s(""),p=s(""),d=s(!1),m=s(""),h=s("email"),r=s("identifier"),b=s(!1),A=E(()=>{const o=n.value.trim();return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)});E(()=>{const o=n.value.trim();return o?o.length<=22?o:`${o.slice(0,10)}â€¦${o.slice(-8)}`:""});const y=()=>{window.turnstile&&(a||r.value==="password"&&U.value&&(a=window.turnstile.render("#turnstile-widget-login",{sitekey:Ae,callback:o=>{l.value=o},"error-callback":()=>{l.value=""},"expired-callback":()=>{l.value=""}})))},N=()=>{if(!a||!window.turnstile){l.value="";return}window.turnstile.reset(a),l.value=""},x=()=>{a&&window.turnstile&&window.turnstile.remove(a),a=null,l.value=""};D(()=>{const o=V.query.email;if(o&&typeof o=="string"&&(n.value=o),window.turnstile)return;const e=setInterval(()=>{window.turnstile&&(clearInterval(e),k().then(()=>y()))},100);setTimeout(()=>{clearInterval(e)},8e3)}),X(()=>{x()}),J(()=>r.value,async o=>{if(o!=="password"){x();return}await k(),y()});const $=o=>{h.value=o,p.value="",d.value=!1,u.value="",m.value="",r.value="identifier",x()},R=()=>{r.value="identifier",u.value="",p.value="",x()},W=async()=>{if(r.value==="identifier"){if(p.value="",!A.value)return;r.value="password",await k(),y();return}await q()},q=async()=>{var e,c;if(!l.value){typeof window<"u"&&((e=window.__toast)!=null&&e.error)&&window.__toast.error("Please complete the CAPTCHA verification");return}p.value="",d.value=!0;const o=await z.login(n.value.trim(),u.value,l.value);o.success?(N(),M.push("/")):(p.value=o.error,typeof window<"u"&&((c=window.__toast)!=null&&c.error)&&window.__toast.error(o.error||"Login failed"),N()),d.value=!1},F=async()=>{var o;typeof window<"u"&&((o=window.__toast)!=null&&o.info)&&window.__toast.info("Phone login is not available yet. Please use Email.")},G=()=>{b.value=!1,M.push({path:"/register",query:{email:n.value.trim()}})},H=()=>{const o=ie(),e=o.endsWith("/api")?`${o}/auth/google`:`${o}/api/auth/google`;window.location.href=e};return(o,e)=>{const c=Y("router-link");return f(),w("div",ne,[t("div",re,[t("div",ae,[t("div",de,[t("img",{src:_(B),alt:"TradeXion",class:"w-7 h-7 object-contain"},null,8,ue),e[7]||(e[7]=t("span",{class:"font-semibold tracking-tight text-white"},"TradeXion",-1))]),v(c,{to:"/register",class:"px-4 py-1.5 rounded-full text-sm font-semibold glass-button-no-hover text-white border border-white/20 hover:border-white/30 transition-colors"},{default:C(()=>[P(j(_(I)("auth.register")),1)]),_:1})])]),t("div",ce,[t("div",we,[t("div",fe,[v(te)]),t("div",pe,[e[19]||(e[19]=t("h1",{class:"text-2xl md:text-3xl font-bold tracking-tight mb-3 text-white"},"Log In",-1)),t("div",ve,[t("button",{type:"button",class:L(["pb-2 border-b-2 transition-colors",h.value==="email"?"border-white text-white":"border-transparent text-white/50 hover:text-white/80"]),onClick:e[0]||(e[0]=i=>$("email"))}," Email ",2),t("button",{type:"button",class:L(["pb-2 border-b-2 transition-colors",h.value==="phone"?"border-white text-white":"border-transparent text-white/50 hover:text-white/80"]),onClick:e[1]||(e[1]=i=>$("phone"))}," Phone ",2)]),t("div",me,[h.value==="email"?(f(),w("form",{key:0,onSubmit:S(W,["prevent"]),class:"space-y-2.5"},[r.value==="identifier"?(f(),w("div",he,[e[8]||(e[8]=t("label",{class:"block text-xs text-white/80 font-medium"},"Email",-1)),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>n.value=i),type:"email",autocomplete:"email",class:"w-full px-3 py-2.5 text-sm glass-input rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/20 transition-all",placeholder:"Email",required:""},null,512),[[T,n.value,void 0,{trim:!0}]]),t("button",{type:"submit",disabled:d.value||!A.value,class:"w-full py-2.5 text-sm rounded-full font-semibold glass-button-no-hover text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed border border-white/20"}," Next ",8,be)])):(f(),w("div",xe,[t("div",{class:"flex items-center gap-2 mb-1.5"},[t("button",{type:"button",class:"p-1 hover:bg-white/10 rounded-lg transition-colors",onClick:R,"aria-label":"Back"},[...e[9]||(e[9]=[t("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e[10]||(e[10]=t("div",{class:"flex-1 text-center text-xs font-semibold text-white truncate px-2"},"Log In",-1)),e[11]||(e[11]=t("div",{class:"w-7"},null,-1))]),e[13]||(e[13]=t("label",{class:"block text-xs text-white/80 font-medium"},"Email",-1)),t("input",{value:n.value,type:"email",autocomplete:"email",readonly:"",class:"w-full px-3 py-2.5 text-sm rounded-lg border border-white/10 bg-white/5 text-white/80 placeholder-white/40 focus:outline-none"},null,8,ge),e[14]||(e[14]=t("label",{class:"block text-xs text-white/80 font-medium"},"Password",-1)),g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=i=>u.value=i),type:"password",autocomplete:"current-password",class:"w-full px-3 py-2.5 text-sm glass-input rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/20 transition-all",placeholder:"Password",required:""},null,512),[[T,u.value]]),t("div",ye,[v(c,{to:"/forgot-password",class:"text-xs font-semibold text-white/80 hover:text-white"},{default:C(()=>[...e[12]||(e[12]=[P(" Forgot password ",-1)])]),_:1})]),t("div",ke,[g(t("div",{ref_key:"turnstileWidget",ref:U,id:"turnstile-widget-login"},null,512),[[Q,r.value==="password"]])]),t("button",{type:"submit",disabled:d.value||!l.value||!u.value,class:"w-full py-2.5 text-sm rounded-full font-semibold glass-button-no-hover text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed border border-white/20"},j(d.value?_(I)("auth.loggingIn"):"Log In"),9,_e)]))],32)):(f(),w("form",{key:1,onSubmit:S(F,["prevent"]),class:"space-y-2.5"},[e[16]||(e[16]=t("label",{class:"block text-xs text-white/80 font-medium"},"Phone",-1)),t("div",Ce,[e[15]||(e[15]=t("div",{class:"text-white/70 text-sm font-semibold"},"+",-1)),g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=i=>m.value=i),type:"tel",inputmode:"tel",autocomplete:"tel",class:"flex-1 bg-transparent outline-none text-sm text-white placeholder-white/40",placeholder:"Enter phone number",required:""},null,512),[[T,m.value,void 0,{trim:!0}]])]),t("button",{type:"submit",disabled:d.value||!m.value,class:"w-full py-2.5 text-sm rounded-full font-semibold glass-button-no-hover text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed border border-white/20"}," Next ",8,Te)],32))]),e[20]||(e[20]=t("div",{class:"my-3 flex items-center gap-3"},[t("div",{class:"h-px flex-1 bg-white/15"}),t("div",{class:"text-xs text-white/60"},"Or"),t("div",{class:"h-px flex-1 bg-white/15"})],-1)),t("button",{type:"button",onClick:H,class:"w-full py-2.5 text-sm rounded-lg glass-card-no-hover border border-white/12 hover:border-white/20 transition-colors flex items-center justify-center gap-2 font-semibold text-white"},[...e[17]||(e[17]=[Z('<svg class="w-4 h-4" viewBox="0 0 24 24"><path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg> Continue with Google ',2)])]),t("div",Pe,[v(c,{to:"/register",class:"font-semibold text-white hover:text-white/80"},{default:C(()=>[...e[18]||(e[18]=[P("Create a TradeXion Account",-1)])]),_:1})])])])]),v(oe),b.value?(f(),w("div",Ie,[t("div",{class:"absolute inset-0 bg-black/40",onClick:e[5]||(e[5]=i=>b.value=!1)}),t("div",Me,[e[21]||(e[21]=t("div",{class:"text-sm text-white/80 leading-relaxed"},` We can't find this account. Please click "Confirm" to sign up and log in now. `,-1)),t("div",Ue,[t("button",{type:"button",class:"flex-1 py-2.5 rounded-full border border-white/15 text-white/80 font-semibold hover:bg-white/10",onClick:e[6]||(e[6]=i=>b.value=!1)}," Cancel "),t("button",{type:"button",class:"flex-1 py-2.5 rounded-full glass-button-no-hover text-white font-semibold border border-white/20",onClick:G}," Confirm ")])])])):K("",!0)])}}};export{Ve as default};
