import{l as Te,r as v,Q as Ie,u as Ne,g as He,b as i,c as J,H as k,f as e,t as a,J as m,M as Oe,a as C,n as h,O as Pe,P as Ve,F as z,d as R,I as Fe,N as U,e as qe,R as Qe,o as r,K as De}from"./vendor-DokIFdLQ.js";import{u as We,b as E}from"./index-DaQrArxD.js";import{_ as Ke,a as Ge}from"./DesktopNav-DHlvEWe_.js";import{S}from"./SkeletonLoader-r6uUC3mq.js";import{g as Je}from"./coinLogos-BjOeNWjs.js";import{C as Se}from"./CustomSelect-Cuk4tAr6.js";/* empty css                                                                       */const Xe={class:"min-h-screen"},Ye={class:"md:flex"},Ze={class:"flex-1 pb-16 md:pb-0"},et={class:"px-3 py-2 border-b border-white/10"},tt={class:"mb-2"},st={class:"text-base font-bold text-white"},ot={class:"flex items-center gap-3 py-2"},lt={class:"flex-1 text-center text-white font-semibold text-base"},at={class:"p-2 md:p-4"},nt={key:0,class:"flex flex-row gap-2 md:gap-3 items-stretch"},rt={class:"flex-1 min-w-0 max-w-[50%] flex flex-col gap-3"},it={class:"flex-1 min-w-0 max-w-[50%] flex flex-col gap-3"},dt={key:1,class:"flex flex-row gap-2 md:gap-3 items-stretch"},ct={class:"flex-1 min-w-0 max-w-[50%] flex flex-col h-full"},ut={class:"flex gap-2 mb-3 items-center"},vt={class:"mb-2"},pt={class:"block text-xs text-white/70 mb-1"},xt={class:"mb-2"},mt={class:"flex items-center gap-1.5"},ft={class:"mb-2"},ht={class:"mb-3 space-y-0.5"},bt={class:"flex justify-between text-xs"},wt={class:"text-white truncate ml-2"},yt={class:"flex justify-between text-xs"},gt={class:"text-white/70"},_t={class:"text-white truncate ml-2"},kt={class:"flex justify-between text-xs"},Ct={class:"text-white truncate ml-2"},Tt=["disabled"],Ft={class:"flex-1 min-w-0 max-w-[50%] flex flex-col h-full"},Dt={class:"flex gap-2 mb-3 items-center"},St={class:"flex-1 text-center"},Mt={class:"text-sm md:text-base font-bold text-blue-400 truncate"},$t={class:"mb-2"},Bt={class:"flex justify-between text-xs text-white/60 mb-1"},At={class:"space-y-0 max-h-32 md:max-h-48 overflow-y-auto"},jt=["onClick"],Ut={class:"relative z-10 text-red-400 font-medium text-xs truncate"},Et={class:"relative z-10 text-white/70 text-xs truncate"},Lt={class:"border-t border-b border-white/10 py-1.5 my-1 text-center"},zt={class:"text-xs font-bold text-blue-400 truncate"},Rt={class:"space-y-0 max-h-32 md:max-h-48 overflow-y-auto"},It=["onClick"],Nt={class:"relative z-10 text-blue-400 font-medium text-xs truncate"},Ht={class:"relative z-10 text-white/70 text-xs truncate"},Ot={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center p-3",style:{"z-index":"9999 !important"}},Pt={class:"flex items-center justify-between px-4 py-3 border-b border-white/5 bg-slate-900/80"},Vt={class:"text-sm font-semibold tracking-wide text-white"},qt={class:"flex flex-col items-center justify-center py-10 px-6 min-h-[280px]"},Qt={key:0,class:"relative w-28 h-28 mb-5"},Wt={class:"w-28 h-28 transform -rotate-90",viewBox:"0 0 120 120"},Kt=["stroke-dashoffset"],Gt={class:"absolute inset-0 flex items-center justify-center"},Jt={class:"text-center"},Xt={class:"text-4xl font-semibold text-white"},Yt={key:1,class:"text-center mb-5"},Zt={key:2,class:"text-center mb-5"},es={class:"w-24 h-24 mx-auto mb-4 flex items-center justify-center"},ts={class:"text-center"},ss={key:0,class:"w-20 h-20 mx-auto mb-2 rounded-full bg-green-500/15 flex items-center justify-center"},os={key:1,class:"w-20 h-20 mx-auto mb-2 rounded-full bg-red-500/15 flex items-center justify-center"},ls={class:"mt-1 text-xs text-white/60 whitespace-nowrap"},as={class:"text-base font-semibold text-blue-400"},ns={key:3,class:"text-center mb-7"},rs={class:"text-lg font-semibold text-blue-400"},is={class:"w-full space-y-0 px-5 pb-2"},ds={class:"flex justify-between items-center py-3 border-b border-white/5"},cs={class:"flex justify-between items-center py-3 border-b border-white/5"},us={class:"text-sm font-medium text-white"},vs={class:"flex justify-between items-center py-3 border-b border-white/5"},ps={class:"text-sm font-medium text-white"},xs={class:"flex justify-between items-center py-3"},ms={class:"text-sm text-white/60"},fs={class:"px-4 pb-4 pt-2"},hs={class:"mt-3"},bs={class:"flex gap-2 mb-4 border-b border-white/10"},ws={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 bg-green-400"},ys={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 bg-green-400"},gs={key:0},_s={key:0,class:"text-center py-12"},ks={class:"text-gray-400"},Cs={key:1,class:"space-y-2"},Ts=["onClick"],Fs={class:"flex justify-between items-start mb-2"},Ds={class:"flex items-center gap-2 mb-1"},Ss={class:"text-white/70 text-xs"},Ms={class:"text-xs text-white/60"},$s={class:"text-right"},Bs={key:0,class:"text-lg font-bold text-green-400"},As={key:1,class:"text-sm text-blue-400 flex items-center justify-end gap-1"},js={class:"text-xs text-white/60 mt-1"},Us={key:1},Es={key:0,class:"text-center py-12"},Ls={class:"text-gray-400"},zs={key:1,class:"space-y-2"},Rs={class:"flex justify-between items-start mb-2"},Is={class:"flex items-center gap-2 mb-1"},Ns={class:"text-white/70 text-xs"},Hs={key:0,class:"flex items-center gap-1 text-xs px-2 py-0.5 rounded bg-green-500/20 text-green-400"},Os={key:1,class:"flex items-center gap-1 text-xs px-2 py-0.5 rounded bg-red-500/20 text-red-400"},Ps={class:"text-xs text-white/60"},Vs={class:"text-right"},qs={class:"text-xs text-white/60"},Qs={class:"relative glass-card w-full md:w-96 md:max-w-md rounded-b-2xl md:rounded-b-2xl shadow-2xl max-h-[80vh] flex flex-col animate-slide-up"},Ws={class:"sticky top-0 glass-card-no-hover border-b border-white/10 px-4 py-4 z-10"},Ks={class:"flex items-center justify-between"},Gs={class:"flex-1 overflow-y-auto"},Js=["onClick"],Xs={class:"flex items-center gap-3 flex-1 min-w-0"},Ys=["src","alt"],Zs={class:"text-white font-medium"},eo={class:"flex items-center gap-4 flex-shrink-0"},to={class:"text-white font-medium text-sm min-w-[80px] text-right"},vo={__name:"Contracts",setup(so){const{t:p}=We(),V=Ie(),X=Te(()=>window.innerWidth<768),T=v((()=>{if(V.query.symbol){let s=V.query.symbol.trim();return s.includes("/")||(s=s.replace(/USDT$/,"/USDT")),s}return"BTC/USDT"})()),D=v(V.query.side==="sell"?"sell":"buy"),Y=v("USDT"),w=v(""),y=v("30"),M=v("transaction"),$=v(null),B=v({bids:[],asks:[]}),q=v(0),I=v(!1),j=v(!1),Z=v([]),Q=v(!0),g=v([]),W=v([]),x=v({}),f=v(!1),l=v(null),N={30:{minAmount:100,profitRate:10},60:{minAmount:1e3,profitRate:20},120:{minAmount:5e3,profitRate:30},180:{minAmount:2e4,profitRate:40},240:{minAmount:5e4,profitRate:50},300:{minAmount:1e5,profitRate:60}},ee=["BTC","ETH","BNB","XRP","ADA","DOGE","DOT","LTC","BCH","ETC","NEO","IOTA","LUNA"];v(ee.map(s=>`${s}/USDT`));const _=s=>{if(s==null)return"0.00";const t=typeof s=="string"?parseFloat(s):s;return isNaN(t)?"0.00":t>=1?t.toFixed(2):t>=.01?t.toFixed(4):t.toFixed(8)},te=s=>s?parseFloat(s).toFixed(2):"0.00",se=s=>{},oe=(s,t)=>{if(!B.value.bids.length||!B.value.asks.length)return 0;const d=t==="bid"?B.value.bids.map(c=>parseFloat(c.quantity)):B.value.asks.map(c=>parseFloat(c.quantity)),n=Math.max(...d);return n===0?0:parseFloat(s)/n*100},K=async()=>{Q.value=!0;const s=T.value.replace("/","");try{await Promise.all([le(s),ae(s),ne()])}finally{Q.value=!1}},le=async s=>{try{const t=await E.get(`/market/ticker/${s}/24h`);$.value=t.data}catch(t){console.error("Error loading ticker:",t)}},ae=async s=>{try{const t=await E.get(`/market/orderbook/${s}`,{params:{limit:20}});B.value=t.data}catch(t){console.error("Error loading order book:",t)}},ne=async()=>{var s,t,d;try{console.log("[Contracts] Loading contract account balance...");const n=await E.get("/wallet/balance",{params:{account_type:"contract"}});console.log("[Contracts] Contract account balance response:",n.data);const c=(s=n.data.balances)==null?void 0:s.find(F=>F.currency==="USDT");console.log("[Contracts] USDT contract balance found:",c),q.value=(c==null?void 0:c.available)||0,console.log("[Contracts] Set walletBalance.value to:",q.value)}catch(n){console.error("[Contracts] Error loading contract account balance:",n),console.error("[Contracts] Error response:",(t=n.response)==null?void 0:t.data),console.error("[Contracts] Error status:",(d=n.response)==null?void 0:d.status)}},Me=async()=>{try{const s=ee.map(async d=>{try{const n=`${d}USDT`,c=await E.get(`/market/ticker/${n}/24h`);return c.data&&c.data.price?{symbol:`${d}/USDT`,price:c.data.price,change:c.data.priceChangePercent||0}:null}catch(n){return console.debug(`Failed to fetch ${d}:`,n.message),null}}),t=await Promise.all(s);Z.value=t.filter(Boolean).sort((d,n)=>d.symbol.localeCompare(n.symbol))}catch(s){console.error("Error loading coin list:",s)}},$e=s=>{T.value=s,j.value=!1,K()},Be=s=>{const t=s.split("/")[0];return Je(t)||`https://via.placeholder.com/32?text=${t}`},Ae=s=>{const t=s.target.alt.split("/")[0];s.target.src=`https://via.placeholder.com/32?text=${t}`},je=async()=>{var t,d,n,c,F;if(!w.value||parseFloat(w.value)<=0){alert("Please enter a valid opening quantity");return}const s=N[y.value];if(parseFloat(w.value)<s.minAmount){alert(`Minimum amount for ${y.value}s trade is ${s.minAmount} USDT`);return}I.value=!0;try{const b=await E.post("/contracts",{symbol:T.value,side:D.value,amount:parseFloat(w.value),duration:parseInt(y.value),entry_price:((t=$.value)==null?void 0:t.price)||5e4});console.log("Trade created:",b.data),w.value="";const u=b.data.trade;if(console.log("=== TRADE CREATED ==="),console.log("Full response:",b),console.log("Response data:",b.data),console.log("Created trade:",u),u){if(l.value={id:u.id,symbol:u.symbol||T.value,side:u.side||D.value,amount:parseFloat(u.amount)||parseFloat(w.value),duration:parseInt(u.duration)||parseInt(y.value),profit_rate:parseFloat(u.profit_rate)||((d=N[y.value])==null?void 0:d.profitRate)||10,entry_price:parseFloat(u.entry_price)||parseFloat((n=$.value)==null?void 0:n.price)||5e4,expires_at:u.expires_at,status:u.status||"pending"},f.value=!0,u.expires_at){const A=new Date(u.expires_at).getTime(),O=Date.now(),P=Math.floor((A-O)/1e3);x.value[u.id]=Math.max(0,P),console.log("Countdown initialized from expires_at:",x.value[u.id],"seconds")}else if(u.duration)x.value[u.id]=Math.max(0,parseInt(u.duration)),console.log("Countdown set from duration:",u.duration);else{const A=parseInt(y.value);x.value[u.id]=Math.max(0,A),console.log("Countdown set to selected duration:",A)}await Qe(),console.log("=== MODAL STATE ==="),console.log("currentActiveTrade:",l.value),console.log("showActiveTradeModal:",f.value),console.log("Modal condition check:",!!l.value&&f.value),console.log("Countdown value:",x.value[u.id]),g.value.unshift(l.value)}else console.error("❌ No trade in response!"),console.error("Response:",b),console.error("Response data:",b.data),alert("Trade created but no trade data returned. Please check console.");K(),H()}catch(b){console.error("Error creating trade:",b),alert(((F=(c=b.response)==null?void 0:c.data)==null?void 0:F.error)||"Failed to create contract trade")}I.value=!1},H=async()=>{try{const t=(await E.get("/contracts")).data.trades||[],d=Date.now();if(g.value=t.filter(n=>n.expires_at?new Date(n.expires_at).getTime()>d:!1),W.value=t.filter(n=>n.expires_at?new Date(n.expires_at).getTime()<=d:!1),g.value.forEach(n=>{if(n.expires_at){const c=new Date(n.expires_at).getTime(),F=Math.floor((c-d)/1e3);x.value[n.id]=Math.max(0,F)}}),g.value.length>0&&!f.value&&!l.value&&(l.value=g.value[0],f.value=!0),l.value&&f.value){const n=t.find(c=>c.id===l.value.id);n&&(l.value=n)}}catch(s){console.error("Error loading contract trades:",s)}},Ue=s=>{if(s<=0)return"00:00";const t=Math.floor(s/60),d=s%60;return`${String(t).padStart(2,"0")}:${String(d).padStart(2,"0")}`},Ee=s=>s?new Date(s).toLocaleString():"",G=Te(()=>{if(!l.value)return 0;const s=l.value.profit_rate/100;return parseFloat(l.value.amount)*s}),Le=()=>{g.value.forEach(s=>{if(s.expires_at){const t=new Date(s.expires_at).getTime(),d=Date.now(),n=Math.floor((t-d)/1e3);x.value[s.id]=Math.max(0,n),n<=0&&x.value[s.id]===0&&setTimeout(()=>{H()},2e3)}}),l.value&&x.value[l.value.id]!==void 0&&x.value[l.value.id]<0&&(x.value[l.value.id]=0)};Ne(()=>g.value.length,(s,t)=>{s>0&&!f.value&&(l.value=g.value[0],f.value=!0)});const ze=async()=>{const s=T.value.replace("/","");await Promise.all([le(s),ae(s)])};return He(()=>{K(),Me(),H();let s=!1,t=0;setInterval(async()=>{if(!s){s=!0;try{await ze(),t=(t+1)%5,t===0&&await ne()}catch(n){console.error("Error refreshing market data:",n)}finally{s=!1}}},2e3),setInterval(()=>{Le()},1e3);let d=!1;setInterval(async()=>{if(!d){d=!0;try{await H()}catch(n){console.error("Error loading contract trades:",n)}finally{d=!1}}},3e3)}),(s,t)=>{var d,n,c,F,b,u,A,O,P,re,ie,de,ce,ue,ve,pe,xe,me,fe,he,be,we,ye,ge,_e,ke,Ce;return r(),i("div",Xe,[X.value?(r(),J(Ke,{key:0})):k("",!0),e("div",Ye,[X.value?k("",!0):(r(),J(Ge,{key:0})),e("main",Ze,[e("div",et,[e("div",tt,[e("h1",st,a(m(p)("contracts.title")),1)]),e("div",ot,[e("button",{onClick:t[0]||(t[0]=o=>j.value=!0),class:"p-1.5 hover:opacity-80 transition-opacity"},[...t[17]||(t[17]=[e("svg",{class:"w-5 h-5 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),e("span",lt,a(T.value),1),e("button",{onClick:t[1]||(t[1]=o=>s.$router.push({path:"/kline",query:{symbol:T.value}})),class:"p-1.5 hover:opacity-80 transition-opacity"},[...t[18]||(t[18]=[Oe('<svg class="w-5 h-5" viewBox="0 0 24 24" fill="none"><rect x="2" y="14" width="4" height="6" fill="#10B981"></rect><line x1="4" y1="12" x2="4" y2="14" stroke="#10B981" stroke-width="1.5" stroke-linecap="round"></line><line x1="4" y1="20" x2="4" y2="22" stroke="#10B981" stroke-width="1.5" stroke-linecap="round"></line><rect x="9" y="10" width="4" height="10" fill="#EF4444"></rect><line x1="11" y1="8" x2="11" y2="10" stroke="#EF4444" stroke-width="1.5" stroke-linecap="round"></line><line x1="11" y1="20" x2="11" y2="22" stroke="#EF4444" stroke-width="1.5" stroke-linecap="round"></line><rect x="16" y="14" width="4" height="6" fill="#10B981"></rect><line x1="18" y1="12" x2="18" y2="14" stroke="#10B981" stroke-width="1.5" stroke-linecap="round"></line><line x1="18" y1="20" x2="18" y2="22" stroke="#10B981" stroke-width="1.5" stroke-linecap="round"></line></svg>',1)])])])]),e("div",at,[Q.value?(r(),i("div",nt,[e("div",rt,[C(S,{type:"button"}),C(S,{type:"input"}),C(S,{type:"input"}),C(S,{type:"input"}),C(S,{type:"button"})]),e("div",it,[C(S,{type:"button"}),C(S,{type:"order-book",rows:6}),t[19]||(t[19]=e("div",{class:"h-px bg-white/10 my-1"},null,-1)),C(S,{type:"order-book",rows:6})])])):(r(),i("div",dt,[e("div",ct,[e("div",ut,[e("button",{onClick:t[2]||(t[2]=o=>D.value="buy"),class:h(["flex-1 py-2 rounded-lg font-medium transition-colors",D.value==="buy"?"bg-green-500/20 text-green-300":"bg-white/5 text-white/60 hover:bg-white/10"])},a(m(p)("contracts.up")),3),e("button",{onClick:t[3]||(t[3]=o=>D.value="sell"),class:h(["flex-1 py-2 rounded-lg font-medium transition-colors",D.value==="sell"?"bg-red-500/20 text-red-300":"bg-white/5 text-white/60 hover:bg-white/10"])},a(m(p)("contracts.fall")),3)]),e("div",vt,[e("label",pt,a(m(p)("contracts.transactionMode")),1),C(Se,{modelValue:Y.value,"onUpdate:modelValue":t[4]||(t[4]=o=>Y.value=o),options:[{value:"USDT",label:"USDT"},{value:"COIN",label:"COIN"}]},null,8,["modelValue"])]),e("div",xt,[t[21]||(t[21]=e("label",{class:"block text-xs text-white/70 mb-1"},"Opening quantity",-1)),e("div",mt,[Pe(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>w.value=o),type:"number",step:"0.00000001",placeholder:"0.00",class:"flex-1 min-w-0 px-2 py-1.5 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-blue-500/50 text-sm text-white"},null,512),[[Ve,w.value]]),t[20]||(t[20]=e("span",{class:"text-white/70 text-xs whitespace-nowrap flex-shrink-0"},"USDT",-1))])]),e("div",ft,[t[22]||(t[22]=e("label",{class:"block text-xs text-white/70 mb-1"},"Open time",-1)),C(Se,{modelValue:y.value,"onUpdate:modelValue":t[6]||(t[6]=o=>y.value=o),options:[{value:"30",label:"30 sec"},{value:"60",label:"60 sec"},{value:"120",label:"120 sec"},{value:"180",label:"180 sec"},{value:"240",label:"240 sec"},{value:"300",label:"300 sec"}]},null,8,["modelValue"])]),e("div",ht,[e("div",bt,[t[23]||(t[23]=e("span",{class:"text-white/70"},"Profit rate",-1)),e("span",wt,a(((d=N[y.value])==null?void 0:d.profitRate)||10)+"%",1)]),e("div",yt,[e("span",gt,a(m(p)("contracts.minimumAmount")),1),e("span",_t,a(((n=N[y.value])==null?void 0:n.minAmount)||100)+".00 USDT",1)]),e("div",kt,[t[24]||(t[24]=e("span",{class:"text-white/70"},"Usable",-1)),e("span",Ct,a(_(q.value))+" USDT",1)])]),e("button",{onClick:je,disabled:I.value||!w.value||parseFloat(w.value)<=0,class:h(["w-full py-2.5 rounded-lg font-bold text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm",D.value==="buy"?"bg-green-500 hover:bg-green-600 active:bg-green-700":"bg-red-500 hover:bg-red-600 active:bg-red-700"])},a(I.value?m(p)("common.processing"):`${D.value==="buy"?m(p)("contracts.up"):m(p)("contracts.fall")} ${T.value.split("/")[0]}`),11,Tt)]),e("div",Ft,[e("div",Dt,[t[25]||(t[25]=e("div",{class:"flex-1"},null,-1)),e("div",St,[e("div",Mt,a(_(((c=$.value)==null?void 0:c.price)||0))+" USDT",1)]),t[26]||(t[26]=e("div",{class:"flex-1"},null,-1))]),e("div",$t,[e("div",Bt,[e("span",null,a(m(p)("contracts.price")),1),e("span",null,a(m(p)("contracts.quantity")),1)]),e("div",At,[(r(!0),i(z,null,R(B.value.asks.slice(0,6).reverse(),(o,L)=>(r(),i("div",{key:`ask-${L}`,class:"relative flex justify-between items-center text-xs cursor-pointer hover:bg-white/5 py-0.5 px-1",onClick:Re=>se(o.price)},[e("div",{class:"absolute left-0 top-0 bottom-0 bg-red-500/10 transition-all",style:De({width:`${oe(o.quantity,"ask")}%`})},null,4),e("span",Ut,a(_(o.price)),1),e("span",Et,a(te(o.quantity)),1)],8,jt))),128))])]),e("div",Lt,[e("div",zt,a(_(((F=$.value)==null?void 0:F.price)||0))+" USDT",1)]),e("div",null,[e("div",Rt,[(r(!0),i(z,null,R(B.value.bids.slice(0,6),(o,L)=>(r(),i("div",{key:`bid-${L}`,class:"relative flex justify-between items-center text-xs cursor-pointer hover:bg-white/5 py-0.5 px-1",onClick:Re=>se(o.price)},[e("div",{class:"absolute left-0 top-0 bottom-0 bg-blue-500/10 transition-all",style:De({width:`${oe(o.quantity,"bid")}%`})},null,4),e("span",Nt,a(_(o.price)),1),e("span",Ht,a(te(o.quantity)),1)],8,It))),128))])])])])),(r(),J(qe,{to:"body"},[l.value&&f.value?(r(),i("div",Ot,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[7]||(t[7]=o=>f.value=!1)}),e("div",{class:"relative bg-gradient-to-b from-slate-900 via-slate-900 to-slate-950 rounded-2xl w-full max-w-sm shadow-2xl z-[10000] border border-white/10 overflow-hidden",onClick:t[11]||(t[11]=Fe(()=>{},["stop"]))},[e("div",Pt,[e("button",{onClick:t[8]||(t[8]=o=>f.value=!1),class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...t[27]||(t[27]=[e("svg",{class:"w-4 h-4 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),e("h2",Vt,a(((b=l.value)==null?void 0:b.symbol)||T.value),1),e("button",{onClick:t[9]||(t[9]=o=>f.value=!1),class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...t[28]||(t[28]=[e("svg",{class:"w-4 h-4 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",qt,[(x.value[(u=l.value)==null?void 0:u.id]||0)>0?(r(),i("div",Qt,[(r(),i("svg",Wt,[t[29]||(t[29]=e("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"rgba(255,255,255,0.1)","stroke-width":"8"},null,-1)),e("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#3B82F6","stroke-width":"8","stroke-dasharray":"339.292","stroke-dashoffset":339.292-339.292*(x.value[(A=l.value)==null?void 0:A.id]||0)/(((O=l.value)==null?void 0:O.duration)||30),"stroke-linecap":"round",class:"transition-all duration-1000"},null,8,Kt)])),e("div",Gt,[e("div",Jt,[e("div",Xt,a(x.value[(P=l.value)==null?void 0:P.id]||0),1)])])])):(x.value[(re=l.value)==null?void 0:re.id]||0)<=0&&!((ie=l.value)!=null&&ie.result)?(r(),i("div",Yt,[...t[30]||(t[30]=[e("div",{class:"w-24 h-24 mx-auto mb-4 flex items-center justify-center"},[e("div",{class:"text-center"},[e("svg",{class:"w-10 h-10 text-blue-400 mx-auto mb-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})]),e("div",{class:"text-sm font-medium text-blue-400"},"Analyzing trading data...")])],-1)])])):(de=l.value)!=null&&de.result?(r(),i("div",Zt,[e("div",es,[e("div",ts,[l.value.result==="win"?(r(),i("div",ss,[...t[31]||(t[31]=[e("svg",{class:"w-10 h-10 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):l.value.result==="lose"?(r(),i("div",os,[...t[32]||(t[32]=[e("svg",{class:"w-10 h-10 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)])])):k("",!0),e("div",{class:h(["text-xl font-bold tracking-wide",{"text-green-400":l.value.result==="win","text-red-400":l.value.result==="lose"}])},a(l.value.result.toUpperCase()),3),e("div",{class:h(["text-lg font-semibold mt-2 whitespace-nowrap",{"text-green-400":parseFloat(l.value.profit_loss||0)>0,"text-red-400":parseFloat(l.value.profit_loss||0)<0}])},a(parseFloat(l.value.profit_loss||0)>0?"+":"")+a(parseFloat(l.value.profit_loss||0).toFixed(2))+" USDT ",3),e("div",ls,[t[33]||(t[33]=U(" Now price - ",-1)),e("span",as,a(_(((ce=$.value)==null?void 0:ce.price)||((ue=l.value)==null?void 0:ue.entry_price)||0)),1)])])])])):k("",!0),(x.value[(ve=l.value)==null?void 0:ve.id]||0)>0&&!((pe=l.value)!=null&&pe.result)?(r(),i("div",ns,[t[34]||(t[34]=e("div",{class:"text-xs text-white/50 mb-0.5"},"Now price",-1)),e("div",rs,a(_(((xe=$.value)==null?void 0:xe.price)||((me=l.value)==null?void 0:me.entry_price)||0)),1)])):k("",!0),e("div",is,[e("div",ds,[t[35]||(t[35]=e("span",{class:"text-sm text-white/60"},"Direction:",-1)),e("span",{class:h(["text-sm font-semibold",((fe=l.value)==null?void 0:fe.side)==="buy"?"text-green-400":"text-red-400"])},a(((he=l.value)==null?void 0:he.side)==="buy"?m(p)("contracts.up"):m(p)("contracts.fall")),3)]),e("div",cs,[t[36]||(t[36]=e("span",{class:"text-sm text-white/60"},"Opening quantity:",-1)),e("span",us,a(parseFloat(((be=l.value)==null?void 0:be.amount)||0).toFixed(2))+" USDT",1)]),e("div",vs,[t[37]||(t[37]=e("span",{class:"text-sm text-white/60"},"Purchase price:",-1)),e("span",ps,a(_(((we=l.value)==null?void 0:we.entry_price)||0)),1)]),e("div",xs,[e("span",ms,a(((ye=l.value)==null?void 0:ye.status)==="completed"?"Profit and loss:":"Estimated profit and loss:"),1),e("span",{class:h(["text-sm font-semibold",((ge=l.value)==null?void 0:ge.status)==="completed"?parseFloat(l.value.profit_loss||0)>=0?"text-green-400":"text-red-400":G.value>=0?"text-green-400":"text-red-400"])},a(((_e=l.value)==null?void 0:_e.status)==="completed"?(parseFloat(l.value.profit_loss||0)>0?"+":"")+parseFloat(l.value.profit_loss||0).toFixed(2)+" USDT":(G.value>=0?"+":"")+G.value.toFixed(2)+" USDT"),3)])])]),e("div",fs,[e("button",{onClick:t[10]||(t[10]=o=>f.value=!1),class:h(["w-full py-3.5 text-white rounded-xl text-sm font-semibold transition-all shadow-lg",((ke=l.value)==null?void 0:ke.status)==="completed"?"bg-green-500/90 hover:bg-green-500 hover:shadow-green-500/50":"bg-blue-500/90 hover:bg-blue-500 hover:shadow-blue-500/50"])},a(((Ce=l.value)==null?void 0:Ce.status)==="completed"?"OK":"Back"),3)])])])):k("",!0)])),e("div",hs,[e("div",bs,[e("button",{onClick:t[12]||(t[12]=o=>M.value="transaction"),class:h(["px-4 py-2 text-sm font-medium transition-all relative",M.value==="transaction"?"text-green-400":"text-gray-400"])},[t[38]||(t[38]=U(" Current ",-1)),M.value==="transaction"?(r(),i("span",ws)):k("",!0)],2),e("button",{onClick:t[13]||(t[13]=o=>M.value="closed"),class:h(["px-4 py-2 text-sm font-medium transition-all relative",M.value==="closed"?"text-green-400":"text-gray-400"])},[t[39]||(t[39]=U(" History ",-1)),M.value==="closed"?(r(),i("span",ys)):k("",!0)],2)]),M.value==="transaction"?(r(),i("div",gs,[g.value.length===0?(r(),i("div",_s,[t[40]||(t[40]=e("svg",{class:"w-16 h-16 text-gray-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),e("p",ks,a(m(p)("contracts.noHistory")),1)])):(r(),i("div",Cs,[(r(!0),i(z,null,R(g.value,o=>(r(),i("div",{key:o.id,onClick:L=>{l.value=o,f.value=!0},class:"bg-white/5 rounded-lg p-3 border border-white/10 cursor-pointer hover:bg-white/10 transition-colors"},[e("div",Fs,[e("div",null,[e("div",Ds,[e("span",{class:h(["text-sm font-bold",o.side==="buy"?"text-green-400":"text-red-400"])},a(o.side==="buy"?m(p)("contracts.up"):m(p)("contracts.fall")),3),e("span",Ss,a(o.symbol),1)]),e("div",Ms,a(parseFloat(o.amount).toFixed(2))+" USDT • "+a(o.duration)+"s • "+a(o.profit_rate)+"% ",1)]),e("div",$s,[(x.value[o.id]||0)>0?(r(),i("div",Bs,a(Ue(x.value[o.id]||0)),1)):(r(),i("div",As,[...t[41]||(t[41]=[e("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),U(" Analyzing trading data... ",-1)])])),e("div",js,"Entry: "+a(_(o.entry_price)),1)])])],8,Ts))),128))]))])):(r(),i("div",Us,[W.value.length===0?(r(),i("div",Es,[t[42]||(t[42]=e("svg",{class:"w-16 h-16 text-gray-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),e("p",Ls,a(m(p)("contracts.noHistory")),1)])):(r(),i("div",zs,[(r(!0),i(z,null,R(W.value,o=>(r(),i("div",{key:o.id,class:"bg-white/5 rounded-lg p-3 border border-white/10"},[e("div",Rs,[e("div",null,[e("div",Is,[e("span",{class:h(["text-sm font-bold",o.side==="buy"?"text-green-400":"text-red-400"])},a(o.side==="buy"?m(p)("contracts.up"):m(p)("contracts.fall")),3),e("span",Ns,a(o.symbol),1),o.result==="win"?(r(),i("span",Hs,[...t[43]||(t[43]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),U(" WIN ",-1)])])):o.result==="lose"?(r(),i("span",Os,[...t[44]||(t[44]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1),U(" LOSE ",-1)])])):k("",!0)]),e("div",Ps,a(parseFloat(o.amount).toFixed(2))+" USDT • "+a(o.duration)+"s • "+a(o.profit_rate)+"% ",1)]),e("div",Vs,[e("div",{class:h(["text-lg font-bold",{"text-green-400":parseFloat(o.profit_loss)>0,"text-red-400":parseFloat(o.profit_loss)<0,"text-white/60":parseFloat(o.profit_loss)===0}])},a(parseFloat(o.profit_loss)>0?"+":"")+a(parseFloat(o.profit_loss).toFixed(2))+" USDT ",3),e("div",qs,a(Ee(o.created_at)),1)])])]))),128))]))]))])])])]),j.value?(r(),i("div",{key:1,class:"fixed inset-0 z-50 flex items-end md:items-center md:justify-center",onClick:t[16]||(t[16]=Fe(o=>j.value=!1,["self"]))},[e("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t[14]||(t[14]=o=>j.value=!1)}),e("div",Qs,[e("div",Ws,[e("div",Ks,[t[46]||(t[46]=e("h2",{class:"text-lg font-bold text-white"},"USDT",-1)),e("button",{onClick:t[15]||(t[15]=o=>j.value=!1),class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...t[45]||(t[45]=[e("svg",{class:"w-5 h-5 text-white/70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Gs,[(r(!0),i(z,null,R(Z.value,o=>(r(),i("div",{key:o.symbol,onClick:L=>$e(o.symbol),class:"flex items-center justify-between px-4 py-3 hover:bg-white/5 active:bg-white/10 transition-colors cursor-pointer border-b border-white/10"},[e("div",Xs,[e("img",{src:Be(o.symbol),alt:o.symbol,class:"w-8 h-8 rounded-full flex-shrink-0",onError:Ae},null,40,Ys),e("span",Zs,a(o.symbol.split("/")[0]),1)]),e("div",eo,[e("span",{class:h(["text-sm font-medium",o.change>=0?"text-green-400":"text-red-400"])},a(o.change>=0?"+":"")+a(o.change.toFixed(2))+"% ",3),e("span",to,a(_(o.price)),1)])],8,Js))),128))])])])):k("",!0)])}}};export{vo as default};
