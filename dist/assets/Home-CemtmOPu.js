import{r as p,l as j,H as X,g as Ce,B as Se,b as l,c as oe,I as N,f as s,a as Te,J as ne,K as f,w as Me,F as b,d as w,i as Ue,L as Fe,t as i,M as Le,o as n,n as S,N as Be}from"./vendor-QOrkcOk8.js";import{u as le,a as De,b as Ne}from"./index-wX3mV7sr.js";import{_ as je,a as Ae}from"./DesktopNav-y0IF6Y0_.js";import{g as Ee}from"./coinLogos-BjOeNWjs.js";const Ie="/assets/usa-flag-LZUVeM7k.png",Pe="/assets/germeny-flag-DDgOSH1Q.png",$e="/assets/india-hindi-flag-CkYxsXNN.png",Re="/assets/japan-flag-DIMCzCTn.png",We="/assets/portugal-flag-DerlV5lF.png",ze="/assets/russia-flag-CPT_Kmln.png",Oe="/assets/sourthkorea-flag-CH4mZ4k3.png",He="/assets/spin-flag-N5JcWeLs.png",V=[{code:"en",name:"English",flag:Ie},{code:"de",name:"Deutsch",flag:Pe},{code:"hi",name:"हिन्दी",flag:$e},{code:"ja",name:"日本語",flag:Re},{code:"pt",name:"Português",flag:We},{code:"ru",name:"Русский",flag:ze},{code:"ko",name:"한국어",flag:Oe},{code:"es",name:"Español",flag:He}];function Xe(){const{locale:A}=le(),x=p(!1),E=j(()=>A.value);return{languages:V,currentLanguage:E,showLanguageMenu:x,getCurrentFlag:()=>{const m=V.find(_=>_.code===E.value);return m?m.flag:V[0].flag},changeLanguage:m=>{A.value=m,localStorage.setItem("locale",m),x.value=!1}}}const Ve={class:"min-h-screen"},qe={class:"md:flex"},Ke={class:"flex-1 pb-16 md:pb-0"},Qe={class:"glass-card-no-hover border-b border-white/10 px-4 py-3 flex items-center justify-between relative z-50"},Je=["src","alt"],Ge={class:"py-1"},Ye=["onClick"],Ze=["src","alt"],et={key:0,class:"w-4 h-4 text-blue-600 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},tt={class:"w-full px-3 md:px-4 py-3 md:py-4"},st=["src","alt"],ot={class:"absolute bottom-3 left-1/2 transform -translate-x-1/2 flex items-center justify-center gap-1.5 z-10"},nt=["onClick","aria-label"],lt={class:"w-full overflow-hidden relative py-2.5 mb-3"},at={class:"flex items-center gap-3 px-3 md:px-4"},rt={class:"flex-1 overflow-hidden relative h-5"},it={class:"absolute inset-0 whitespace-nowrap"},ct={class:"px-3 md:px-4 mb-3"},dt={class:"grid grid-cols-3 gap-2 md:gap-3"},ut=["onClick"],ht={class:"flex flex-col items-center text-center"},mt=["src","alt"],gt={class:"text-xs md:text-sm font-semibold text-white mb-1"},ft={key:1,class:"h-4 bg-white/10 rounded-full w-14 mb-1 animate-pulse"},pt={key:2,class:"text-sm md:text-base font-bold text-white mb-0.5"},vt={key:3,class:"h-4 bg-white/10 rounded w-16 mb-0.5 animate-pulse"},bt={key:4,class:"text-xs text-white/60"},wt={key:5,class:"h-3 bg-white/10 rounded w-20 animate-pulse"},xt={class:"px-3 md:px-4 mb-3"},_t={class:"grid grid-cols-4 gap-2 md:gap-3"},yt=["onClick"],kt=["src","alt"],Ct={class:"text-xs md:text-sm font-medium text-white"},St={class:"px-3 md:px-4 mb-3"},Tt={class:"flex items-center gap-3"},Mt=["src"],Ut={class:"p-3 md:p-8"},Ft={class:"flex flex-col gap-2 md:hidden mb-6"},Lt=["onClick"],Bt={class:"flex items-center justify-between"},Dt={class:"flex items-center gap-2.5 flex-1 min-w-0"},Nt=["src","alt"],jt={class:"flex flex-col min-w-0"},At={class:"text-sm font-semibold text-white truncate"},Et={class:"text-xs text-white/60"},It={class:"flex items-center gap-3 flex-shrink-0"},Pt={class:"text-right"},$t={key:0,class:"text-base font-bold text-white leading-tight"},Rt={key:1,class:"h-4 bg-white/10 rounded w-16 animate-pulse"},Wt={key:0,class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},zt={key:1,class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ot={key:1,class:"h-4 bg-white/10 rounded-full w-14 animate-pulse"},Ht={class:"hidden md:grid md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},Xt=["onClick"],Vt={class:"flex items-center justify-between mb-3"},qt={class:"flex items-center gap-2"},Kt=["src","alt"],Qt={class:"text-sm font-semibold text-white"},Jt={key:1,class:"h-4 bg-white/10 rounded-full w-16 animate-pulse"},Gt={key:0,class:"text-2xl font-bold text-white mb-1"},Yt={key:1,class:"h-5 bg-white/10 rounded w-24 mb-1 animate-pulse"},Zt={key:2,class:"text-xs text-white/60"},es={key:3,class:"h-3 bg-white/10 rounded w-24 animate-pulse"},ts="wss://stream.binance.com:9443/ws/!ticker@arr",ss=3e4,rs={__name:"Home",setup(A){const x=Le(),{t:E}=le(),q=De(),{languages:K,currentLanguage:m,showLanguageMenu:_,getCurrentFlag:ae,changeLanguage:re}=Xe(),Q=j(()=>window.innerWidth<768),I=p(null),T=["BTCUSDT","ETHUSDT","BNBUSDT","XRPUSDT","ADAUSDT","DOGEUSDT","LTCUSDT","ETCUSDT","BCHUSDT","DOTUSDT","NEOUSDT","IOTAUSDT","LUNAUSDT"],v=X({}),ie=p(!0);T.forEach(t=>{v[t]=X({symbol:t.replace("USDT","/USDT"),price:0,change:0,volume:0,isPlaceholder:!0})});const J=j(()=>T.map(t=>v[t])),ce=j(()=>["BTC/USDT","ETH/USDT","XRP/USDT"].map(o=>{const e=o.replace("/","");return v[e]||null})),de=[{name:"services",label:"Services",icon:new URL("/assets/services-Bw8b1gqJ.png",import.meta.url).href},{name:"invite",label:"Invite",icon:new URL("/assets/invite-C50fVWTf.png",import.meta.url).href},{name:"loan",label:"Loan",icon:new URL("/assets/loan-AbtYeaLR.png",import.meta.url).href},{name:"tuto-center",label:"Tuto-Center",icon:new URL("/assets/tuto-center-DzFfNrbC.png",import.meta.url).href}],ue=t=>{console.log("Quick menu clicked:",t)},he=new URL("/assets/quickrecharge-DwBAGCwt.png",import.meta.url).href,M=[new URL("/assets/01-C-LDCpe-.jpeg",import.meta.url).href,new URL("/assets/02-DFWs_zWW.jpeg",import.meta.url).href,new URL("/assets/03-DT8us2VN.jpeg",import.meta.url).href],u=p(0);let c=null;const P=["App Upgrade and Optimization Announcement","Web Update and Optimization Announcement","The loan function is online","Tips for users to beware of counterfeit websites and apps","Invite friends to win limited gifts","New user registration and authentication, enjoy 5USDT airdrop","Server Upgrade Announcement"],U=p(P[0]);let $=null;const G=()=>{const t=Math.floor(Math.random()*P.length);return P[t]},h=p(!1),Y=p(0),g=p(0),F=p(0),me=t=>{h.value=!0,F.value=t.touches[0].clientX,Y.value=u.value,c&&clearInterval(c)},ge=t=>{if(!h.value)return;const o=t.touches[0].clientX,e=F.value-o;g.value=e/window.innerWidth*100},fe=()=>{if(!h.value)return;h.value=!1,Math.abs(g.value)>.3*100&&(g.value>0?R():ee()),g.value=0,L()},pe=t=>{h.value=!0,F.value=t.clientX,Y.value=u.value,c&&clearInterval(c)},ve=t=>{if(!h.value)return;const o=t.clientX,e=F.value-o;g.value=e/window.innerWidth*100},Z=()=>{if(!h.value)return;h.value=!1,Math.abs(g.value)>.3*100&&(g.value>0?R():ee()),g.value=0,L()},R=()=>{u.value=(u.value+1)%M.length},ee=()=>{u.value=u.value===0?M.length-1:u.value-1},be=t=>{u.value=t,c&&clearInterval(c),L()},L=()=>{c&&clearInterval(c),c=setInterval(()=>{h.value||R()},3e3)},we=()=>{q.isAuthenticated?x.push("/assets"):x.push("/login")},W=t=>{x.push({path:"/kline",query:{symbol:t}})},z=t=>t>=1?t.toFixed(2):t>=.01?t.toFixed(4):t.toFixed(8),O=t=>t>=1e9?(t/1e9).toFixed(2)+"B":t>=1e6?(t/1e6).toFixed(2)+"M":t>=1e3?(t/1e3).toFixed(2)+"K":t.toFixed(2),H=t=>{const o=t.split("/")[0];return Ee(o)||`https://via.placeholder.com/32?text=${o}`},y=t=>{const o=t.target.alt.split("/")[0];t.target.src=`https://via.placeholder.com/32?text=${o}`},xe=async()=>{try{const t=await Ne.get("/market/ticker/24h");(Array.isArray(t.data)?t.data:[]).forEach(e=>{const r=e.symbol;if(!T.includes(r))return;const d=v[r];if(!d)return;const C=Number.parseFloat(e.price??e.lastPrice),ye=Number.parseFloat(e.priceChangePercent??e.price_change_percent??0),ke=Number.parseFloat(e.volume??0);Number.isFinite(C)&&(d.price=C,d.change=ye,d.volume=ke,d.isPlaceholder=!1)})}catch(t){console.error("[Home] Failed to load initial tickers:",t)}finally{ie.value=!1}};let a=null,k=null,B=1e3;const _e=t=>{if(!(t!=null&&t.s))return;const o=t.s,e=v[o];if(!e)return;const r=Number.parseFloat(t.c),d=Number.parseFloat(t.P)||0,C=Number.parseFloat(t.v)||0;Number.isFinite(r)&&(e.price!==r||e.change!==d||e.volume!==C||e.isPlaceholder)&&(e.price=r,e.change=d,e.volume=C,e.isPlaceholder=!1)},te=()=>{if((a==null?void 0:a.readyState)!==WebSocket.OPEN){console.log("[WS] Connecting to Binance...");try{a&&(a.onopen=null,a.onmessage=null,a.onerror=null,a.onclose=null,a.close())}catch(t){console.warn("[WS] Cleanup error:",t)}try{a=new WebSocket(ts),a.onopen=()=>{console.log("[WS] Connected successfully"),B=1e3},a.onmessage=t=>{try{const o=JSON.parse(t.data);Array.isArray(o)&&o.forEach(_e)}catch(o){console.error("[WS] Parse error:",o)}},a.onerror=t=>{console.error("[WS] Error:",t)},a.onclose=t=>{console.warn("[WS] Closed:",t.code,t.reason),a=null,se()}}catch(t){console.error("[WS] Setup error:",t),se()}}},se=()=>{k||(k=setTimeout(()=>{k=null,te()},B),B=Math.min(B*2,ss))};let D=null;return Ce(async()=>{console.log("[Home] Mounted. Initializing tickers..."),T.forEach(t=>{v[t]||(v[t]=X({symbol:t.replace("USDT","/USDT"),price:0,change:0,volume:0,isPlaceholder:!0}))}),console.log("[Home] tickerMap size:",Object.keys(v).length),await xe(),te(),L(),U.value=G(),$=setInterval(()=>{U.value=G()},12e3),D=t=>{I.value&&!I.value.contains(t.target)&&(_.value=!1)},setTimeout(()=>{document.addEventListener("click",D)},100)}),Se(()=>{k&&clearTimeout(k);try{a&&(a.onopen=null,a.onmessage=null,a.onerror=null,a.onclose=null,a.close())}catch{}c&&clearInterval(c),$&&clearInterval($),D&&document.removeEventListener("click",D)}),(t,o)=>(n(),l("div",Ve,[Q.value?(n(),oe(je,{key:0})):N("",!0),s("div",qe,[Q.value?N("",!0):(n(),oe(Ae,{key:0})),s("main",Ke,[s("div",Qe,[s("button",{onClick:we,class:"w-10 h-10 glass rounded-full flex items-center justify-center hover:bg-white/10 transition-colors"},[...o[3]||(o[3]=[s("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]),s("div",{class:"relative z-[100]",ref_key:"languageSelectorRef",ref:I},[s("button",{onClick:o[0]||(o[0]=ne(e=>_.value=!f(_),["stop"])),class:"w-8 h-8 rounded-full flex items-center justify-center hover:opacity-80 transition-opacity overflow-hidden"},[s("img",{src:f(ae)(),alt:f(m),class:"w-full h-full object-cover"},null,8,Je)]),Te(Ue,{name:"fade"},{default:Me(()=>[f(_)?(n(),l("div",{key:0,onClick:o[1]||(o[1]=ne(()=>{},["stop"])),class:"absolute right-0 top-full mt-1 bg-white rounded-lg shadow-xl overflow-hidden z-[9999] min-w-[160px] border border-gray-200"},[s("div",Ge,[(n(!0),l(b,null,w(f(K),e=>(n(),l("button",{key:e.code,onClick:r=>f(re)(e.code),class:S(["w-full flex items-center gap-2 px-3 py-1.5 text-sm hover:bg-gray-100 transition-colors",f(m)===e.code?"text-blue-600 font-medium":"text-gray-700"])},[s("img",{src:e.flag,alt:e.name,class:"w-5 h-5 rounded-full object-cover flex-shrink-0"},null,8,Ze),s("span",null,i(e.name),1),f(m)===e.code?(n(),l("svg",et,[...o[4]||(o[4]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):N("",!0)],10,Ye))),128))])])):N("",!0)]),_:1})],512)]),s("div",tt,[s("div",{class:"overflow-hidden relative rounded-lg md:rounded-xl cursor-grab active:cursor-grabbing",style:{"aspect-ratio":"96 / 35"},onTouchstart:me,onTouchmove:ge,onTouchend:fe,onMousedown:pe,onMousemove:ve,onMouseup:Z,onMouseleave:Z},[s("div",{class:"flex h-full",style:Fe({transform:`translateX(-${u.value*100+g.value}%)`,transition:h.value?"none":"transform 0.5s ease-in-out"})},[(n(),l(b,null,w(M,(e,r)=>s("div",{key:r,class:"min-w-full h-full flex-shrink-0"},[s("img",{src:e,alt:`Banner ${r+1}`,class:"w-full h-full object-cover pointer-events-none"},null,8,st)])),64))],4),s("div",ot,[(n(),l(b,null,w(M,(e,r)=>s("button",{key:r,onClick:d=>be(r),class:S(["rounded-full transition-all duration-300",u.value===r?"bg-blue-400 w-6 h-1":"bg-white/30 w-1 h-1 hover:bg-white/50"]),"aria-label":`Go to banner ${r+1}`},null,10,nt)),64))])],32)]),s("div",lt,[s("div",at,[o[5]||(o[5]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"w-4 h-4 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.383 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.383l4.617-3.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z","clip-rule":"evenodd"})])],-1)),s("div",rt,[s("div",it,[(n(),l("span",{key:U.value,class:"text-white text-sm font-medium inline-block animate-marquee",style:{animation:"marquee 12s linear infinite"}},i(U.value),1))])]),o[6]||(o[6]=s("div",{class:"flex-shrink-0"},[s("button",{class:"p-1 hover:bg-white/10 rounded transition-colors"},[s("svg",{class:"w-4 h-4 text-white/70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})])])],-1))])]),s("div",ct,[s("div",dt,[(n(!0),l(b,null,w(ce.value,(e,r)=>(n(),l("div",{key:(e==null?void 0:e.symbol)||r,class:"glass-card rounded-lg p-3 cursor-pointer hover:border-blue-500/50 transition-colors",onClick:d=>W(e.symbol)},[s("div",ht,[s("img",{src:H(e.symbol),alt:e.symbol,class:"w-10 h-10 md:w-12 md:h-12 rounded-full mb-2",onError:y},null,40,mt),s("div",gt,i(e.symbol),1),e.isPlaceholder?(n(),l("div",ft)):(n(),l("span",{key:0,class:S(["text-xs px-2 py-0.5 rounded-full font-medium mb-1",e.change>=0?"bg-green-500/20 text-green-300 border border-green-500/50":"bg-red-500/20 text-red-300 border border-red-500/50"])},i(e.change>=0?"+":"")+i(e.change.toFixed(2))+"% ",3)),e.isPlaceholder?(n(),l("div",vt)):(n(),l("div",pt," $"+i(z(e.price)),1)),e.isPlaceholder?(n(),l("div",wt)):(n(),l("div",bt," Vol "+i(O(e.volume)),1))])],8,ut))),128))])]),s("div",xt,[s("div",_t,[(n(),l(b,null,w(de,(e,r)=>s("div",{key:r,class:"flex flex-col items-center text-center cursor-pointer hover:opacity-80 transition-opacity",onClick:d=>ue(e.name)},[s("img",{src:e.icon,alt:e.name,class:"w-10 h-10 md:w-12 md:h-12 mb-2 object-contain",onError:y},null,40,kt),s("span",Ct,i(e.label),1)],8,yt)),64))])]),s("div",St,[s("div",{onClick:o[2]||(o[2]=e=>t.$router.push("/deposit")),class:"glass-card rounded-lg p-4 cursor-pointer hover:border-blue-500/50 transition-colors flex items-center justify-between"},[s("div",Tt,[s("img",{src:f(he),alt:"Quick recharge",class:"w-12 h-12 md:w-14 md:h-14 object-contain",onError:y},null,40,Mt),o[7]||(o[7]=s("div",null,[s("div",{class:"text-white font-semibold text-sm md:text-base mb-1"},"Quick recharge"),s("div",{class:"text-white/60 text-xs md:text-sm"},"Support Coin BTC/USDT/ETH")],-1))]),o[8]||(o[8]=s("svg",{class:"w-5 h-5 md:w-6 md:h-6 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),s("div",Ut,[s("div",Ft,[(n(!0),l(b,null,w(J.value,e=>(n(),l("div",{key:e.symbol,class:"glass-card rounded-lg p-3 cursor-pointer active:scale-[0.98] transition-transform",onClick:r=>W(e.symbol)},[s("div",Bt,[s("div",Dt,[s("img",{src:H(e.symbol),alt:e.symbol,class:"w-9 h-9 md:w-10 md:h-10 rounded-full flex-shrink-0",onError:y},null,40,Nt),s("div",jt,[s("span",At,i(e.symbol.split("/")[0]),1),s("span",Et,i(t.$t("home.volume"))+" "+i(O(e.volume)),1)])]),s("div",It,[s("div",Pt,[e.isPlaceholder?(n(),l("div",Rt)):(n(),l("div",$t," $"+i(z(e.price)),1))]),e.isPlaceholder?(n(),l("div",Ot)):(n(),l("span",{key:0,class:S(["text-xs px-2 py-1 rounded-full font-medium whitespace-nowrap flex items-center gap-1",e.change>=0?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"])},[e.change<0?(n(),l("svg",Wt,[...o[9]||(o[9]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])])):(n(),l("svg",zt,[...o[10]||(o[10]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"},null,-1)])])),Be(" "+i(e.change>=0?"+":"")+i(e.change.toFixed(2))+"% ",1)],2))])])],8,Lt))),128))]),s("div",Ht,[(n(!0),l(b,null,w(J.value,e=>(n(),l("div",{key:e.symbol,class:"glass-card rounded-xl p-4 cursor-pointer",onClick:r=>W(e.symbol)},[s("div",Vt,[s("div",qt,[s("img",{src:H(e.symbol),alt:e.symbol,class:"w-10 h-10 rounded-full ring-2 ring-white/20",onError:y},null,40,Kt),s("span",Qt,i(e.symbol),1)]),e.isPlaceholder?(n(),l("div",Jt)):(n(),l("span",{key:0,class:S(["text-xs px-2 py-1 rounded-full font-medium",e.change>=0?"bg-green-500/20 text-green-300 border border-green-500/50":"bg-red-500/20 text-red-300 border border-red-500/50"])},i(e.change>=0?"+":"")+i(e.change.toFixed(2))+"% ",3))]),e.isPlaceholder?(n(),l("div",Yt)):(n(),l("div",Gt," $"+i(z(e.price)),1)),e.isPlaceholder?(n(),l("div",es)):(n(),l("div",Zt,i(t.$t("home.volume"))+": "+i(O(e.volume)),1))],8,Xt))),128))])])])])]))}};export{rs as default};
