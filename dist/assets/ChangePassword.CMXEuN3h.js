import{m as y,r as d,f as k,c as m,a as v,h as s,j as C,Q as p,R as w,t as P,b as _,w as N,u as V,N as S,e as c,O as B}from"./vendor.BJKvz4Yw.js";import{_ as M}from"./DesktopNav.BGZcsY3O.js";import{_ as E}from"./MobileNav.CRat4cih.js";import{a as $,d as j,b as A}from"./index.DnUnV9d6.js";const F={class:"min-h-screen bg-gradient-to-br from-[#0b1020] via-[#101c3a] to-[#2b1554]"},R={class:"md:flex"},U={class:"flex-1 pb-16 md:pb-0"},D={class:"glass-card-no-hover border-b border-white/10 px-4 py-3 mb-4"},T={class:"flex items-center justify-between"},W={class:"flex items-center gap-3"},I={class:"px-4 space-y-5"},O=["disabled"],Q={class:"pt-2 border-t border-white/10 mt-2"},K={__name:"ChangePassword",setup(q){S();const h=$(),f=y(()=>window.innerWidth<768),{showSuccess:x,showError:b,showWarning:u}=j(),a=d(""),o=d(""),l=d(""),r=d(!1),g=async()=>{var n,e;if(!a.value||!o.value||!l.value){u("Please fill in all fields.");return}if(o.value.length<8){u("New password must be at least 8 characters.");return}if(o.value!==l.value){u("New passwords do not match.");return}r.value=!0;try{await A.post("/auth/change-password",{oldPassword:a.value,newPassword:o.value}),x("Password changed successfully. Please log in again."),a.value="",o.value="",l.value="",h.logout()}catch(i){console.error("Change password failed:",i);const t=((e=(n=i.response)==null?void 0:n.data)==null?void 0:e.error)||"Failed to change password";b(t)}finally{r.value=!1}};return(n,e)=>{const i=V("router-link");return c(),k("div",F,[f.value?(c(),m(E,{key:0})):v("",!0),s("div",R,[f.value?v("",!0):(c(),m(M,{key:0})),s("main",U,[s("div",D,[s("div",T,[s("div",W,[s("button",{onClick:e[0]||(e[0]=t=>n.$router.back()),class:"p-1.5 hover:bg-white/10 rounded-lg transition-colors"},[...e[4]||(e[4]=[s("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e[5]||(e[5]=s("h1",{class:"text-lg font-bold text-white"},"Modify the password",-1))])])]),s("div",I,[e[12]||(e[12]=s("p",{class:"text-xs text-white/70"}," For your account security, please enter your current password and then your new password twice. ",-1)),s("form",{class:"space-y-4",onSubmit:C(g,["prevent"])},[s("div",null,[e[6]||(e[6]=s("label",{class:"block text-xs text-white/70 mb-1"},"Current password",-1)),p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.value=t),type:"password",autocomplete:"current-password",class:"w-full px-4 py-3 glass-input rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500/50 text-white placeholder-white/50",placeholder:"Enter your current password"},null,512),[[w,a.value]])]),s("div",null,[e[7]||(e[7]=s("label",{class:"block text-xs text-white/70 mb-1"},"New password",-1)),p(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.value=t),type:"password",autocomplete:"new-password",class:"w-full px-4 py-3 glass-input rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500/50 text-white placeholder-white/50",placeholder:"Enter a new password"},null,512),[[w,o.value]]),e[8]||(e[8]=s("p",{class:"mt-1 text-[11px] text-white/50"},"At least 8 characters.",-1))]),s("div",null,[e[9]||(e[9]=s("label",{class:"block text-xs text-white/70 mb-1"},"Confirm new password",-1)),p(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.value=t),type:"password",autocomplete:"new-password",class:"w-full px-4 py-3 glass-input rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500/50 text-white placeholder-white/50",placeholder:"Re-enter the new password"},null,512),[[w,l.value]])]),s("button",{type:"submit",disabled:r.value,class:"w-full py-3 glass-button-no-hover rounded-lg text-sm font-medium text-white hover:bg-white/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},P(r.value?"Changing password...":"Change password"),9,O)],32),s("div",Q,[_(i,{to:"/forgot-password",class:"text-xs text-teal-300 hover:text-teal-200 underline underline-offset-2 inline-block"},{default:N(()=>[...e[10]||(e[10]=[B(" Forgot password? ",-1)])]),_:1}),e[11]||(e[11]=s("p",{class:"mt-1 text-[11px] text-white/50"}," If you've forgotten your password, click above to reset it via email. ",-1))])])])])])}}};export{K as default};
