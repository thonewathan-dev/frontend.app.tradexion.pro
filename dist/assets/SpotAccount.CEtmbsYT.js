import{m as k,r as m,o as F,i as H,f as l,c as T,a as S,h as e,t as r,F as B,g as C,N as L,e as n,k as $}from"./vendor.BJKvz4Yw.js";import{_ as I}from"./DesktopNav.BGZcsY3O.js";import{_ as P}from"./MobileNav.CRat4cih.js";import{b}from"./index.DnUnV9d6.js";import{g as A}from"./coinLogos.gwK95kos.js";const R={class:"min-h-screen bg-gradient-to-br from-[#0b1020] via-[#101c3a] to-[#2b1554]"},W={class:"md:flex"},z={class:"flex-1 pb-16 md:pb-0"},q={class:"px-4"},G={class:"mb-6"},J={class:"flex items-center justify-between mb-1"},K={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},O={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Q={class:"flex items-baseline gap-2"},X={class:"text-3xl font-semibold text-white"},Y={key:0,class:"inline-block h-7 w-24 rounded bg-white/10 animate-pulse"},Z={key:1},ee={class:"mb-8"},te={class:"grid grid-cols-3 gap-3"},se={class:"space-y-2"},oe={key:0,class:"space-y-2"},ne={class:"flex items-center gap-3"},le=["src","alt"],ie={class:"flex flex-col"},ae={class:"text-sm font-medium text-white"},re={class:"text-xs text-white/60"},ce={class:"text-right"},de={class:"text-sm font-medium text-white"},ue={class:"text-[11px] text-white/50"},fe={__name:"SpotAccount",setup(me){const p=L(),x=k(()=>window.innerWidth<768),f=[{symbol:"USDT",name:"TetherUS"},{symbol:"BTC",name:"Bitcoin"},{symbol:"ETH",name:"Ethereum"}],h=m([]),c=m(!1),d=m({USDT:1,BTCUSDT:null,ETHUSDT:null});let u=null;const i=m(!0),w=async()=>{try{h.value.length||(c.value=!0);const s=await b.get("/wallet/balance",{params:{account_type:"spot"}});h.value=s.data.balances||[]}catch(s){console.error("Error loading spot balances:",s)}finally{c.value=!1}},g=async()=>{try{const[s,t]=await Promise.all([b.get("/market/ticker/BTCUSDT"),b.get("/market/ticker/ETHUSDT")]),o=a=>parseFloat(a.price||a.lastPrice||a.close||0);d.value.BTCUSDT=o(s.data),d.value.ETHUSDT=o(t.data)}catch(s){console.error("Error loading prices for spot account:",s)}},_=s=>s==="USDT"?1:s==="BTC"?d.value.BTCUSDT||0:s==="ETH"&&d.value.ETHUSDT||0,v=s=>{const t=h.value.find(o=>o.currency===s);return t?Number(t.available??t.balance??0):0},D=k(()=>f.reduce((s,t)=>{const o=v(t.symbol),a=_(t.symbol);return!a||!o?s:s+o*a},0)),y=s=>(Number(s)||0).toFixed(2),U=s=>{const t=Number(s)||0;return(Math.floor(t*1e8)/1e8).toFixed(8).replace(/0+$/,"").replace(/\.$/,"")||"0"},M=s=>A(s)||"",E=()=>{i.value=!i.value},j=()=>{p.back()},N=()=>{p.push("/deposit")},V=()=>{p.push("/spot")};return F(()=>{w(),g(),u=setInterval(()=>{g(),w()},1e4)}),H(()=>{u&&(clearInterval(u),u=null)}),(s,t)=>(n(),l("div",R,[x.value?(n(),T(P,{key:0})):S("",!0),e("div",W,[x.value?S("",!0):(n(),T(I,{key:0})),e("main",z,[e("div",{class:"glass-card-no-hover border-b border-white/10 px-4 py-3 mb-4"},[e("div",{class:"flex items-center justify-between"},[e("div",{class:"flex items-center gap-3"},[e("button",{onClick:j,class:"p-1.5 hover:bg-white/10 rounded-lg transition-colors"},[...t[1]||(t[1]=[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),t[2]||(t[2]=e("h1",{class:"text-lg font-bold text-white"},"Spot account",-1))])])]),e("div",q,[e("section",G,[e("div",J,[t[5]||(t[5]=e("span",{class:"text-xs text-white/60"},"Est. Total Value",-1)),e("button",{class:"text-white/60 hover:text-white transition-colors",onClick:E},[i.value?(n(),l("svg",K,[...t[3]||(t[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])])):(n(),l("svg",O,[...t[4]||(t[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3l18 18M10.477 10.485A3 3 0 0113.5 13.5M9.88 9.88L5.12 5.12M9.88 9.88L9.88 9.88M9.88 9.88C8.78 10.24 8 11.24 8 12.4M21 12c-1.274-4.057-5.065-7-9.542-7-1.06 0-2.087.16-3.058.458"},null,-1)])]))])]),e("div",Q,[e("span",X,[c.value?(n(),l("span",Y)):(n(),l("span",Z,r(i.value?y(D.value):"******"),1))]),t[6]||(t[6]=e("span",{class:"text-sm text-white/70"},"USDT",-1))])]),e("section",ee,[e("div",te,[e("button",{class:"glass-button-no-hover rounded-xl py-2.5 text-sm font-medium text-white",onClick:N}," Deposit "),e("button",{class:"glass-button-no-hover rounded-xl py-2.5 text-sm font-medium text-white/80",onClick:V}," Trade "),e("button",{class:"glass-button-no-hover rounded-xl py-2.5 text-sm font-medium text-white/80",onClick:t[0]||(t[0]=o=>s.$router.push("/transfer"))}," Transfer ")])]),e("section",se,[t[8]||(t[8]=e("h2",{class:"text-base font-semibold text-white mb-1"},"Balances",-1)),c.value?(n(),l("div",oe,[(n(),l(B,null,C(3,o=>e("div",{key:o,class:"px-3 py-3 rounded-xl flex items-center justify-between bg-white/5"},[...t[7]||(t[7]=[$('<div class="flex items-center gap-3"><div class="w-7 h-7 rounded-full bg-white/10 animate-pulse"></div><div class="space-y-1"><div class="h-3 w-14 bg-white/10 rounded animate-pulse"></div><div class="h-2 w-20 bg-white/5 rounded animate-pulse"></div></div></div><div class="text-right space-y-1"><div class="h-3 w-16 bg-white/10 rounded animate-pulse"></div><div class="h-2 w-20 bg-white/5 rounded animate-pulse"></div></div>',2)])])),64))])):(n(),l(B,{key:1},C(f,o=>e("div",{key:o.symbol,class:"px-3 py-3 rounded-xl flex items-center justify-between bg-white/5 hover:bg-white/10 transition-colors"},[e("div",ne,[e("img",{src:M(o.symbol),alt:o.symbol,class:"w-7 h-7 object-contain"},null,8,le),e("div",ie,[e("span",ae,r(o.symbol),1),e("span",re,r(o.name),1)])]),e("div",ce,[e("div",de,r(i.value?U(v(o.symbol)):"******"),1),e("div",ue," â‰ˆ "+r(i.value?y(v(o.symbol)*_(o.symbol)):"****")+" USDT ",1)])])),64))])])])])]))}};export{fe as default};
