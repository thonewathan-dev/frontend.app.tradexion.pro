import{m as y,r as u,o as q,f as r,c as W,a as m,h as t,t as o,v as i,O as k,F as E,g as M,Q as A,R,n as $,j as H,N as P,e as l}from"./vendor.BJKvz4Yw.js";import{u as G,a as J,b as S,d as K}from"./index.DnUnV9d6.js";import{_ as X}from"./MobileNav.CRat4cih.js";import{_ as Y}from"./DesktopNav.BGZcsY3O.js";const Z={class:"min-h-screen"},tt={class:"md:flex"},et={class:"flex-1 pb-16 md:pb-0"},st={class:"glass-card-no-hover border-b border-white/10 px-4 py-3"},ot={class:"flex items-center justify-between"},at={class:"flex items-center gap-3"},nt={class:"text-lg font-bold text-white"},it={class:"p-4 space-y-4"},lt={class:"flex items-center justify-between"},rt={class:"text-white font-medium text-base"},dt={key:0},ut={class:"flex gap-2"},ct=["onClick"],wt={key:1,class:"text-white/70 text-sm"},ht={class:"text-white font-medium"},vt={class:"text-white/70 text-sm mb-1"},xt={class:"flex items-center justify-between"},mt={class:"text-white text-lg font-medium"},ft={class:"text-white/70 text-sm"},pt=["placeholder"],_t={class:"text-xs text-yellow-400/80 mt-1.5"},bt={class:"text-white/70 text-sm mb-1"},gt={class:"flex items-center gap-2"},yt={class:"text-white/70 text-sm px-2"},kt={class:"text-white/70 text-sm"},Ct={class:"text-white font-medium"},jt={class:"text-white/70 text-sm"},Bt={class:"text-white font-medium text-base"},Tt=["disabled"],Et={class:"glass-card rounded-t-lg md:rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto animate-slide-up"},Mt={class:"sticky top-0 glass-card-no-hover border-b border-white/10 p-4 flex justify-between items-center"},$t={class:"text-lg font-bold text-white"},St={class:"p-4"},Ft=["onClick"],Dt={class:"text-white font-medium"},Wt={key:0,class:"w-5 h-5 text-teal-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},At={class:"glass-card rounded-t-lg md:rounded-lg w-full max-w-md max-h-[80vh] overflow-y-auto animate-slide-up"},Rt={class:"sticky top-0 glass-card-no-hover border-b border-white/10 p-4 flex justify-between items-center"},Ht={class:"text-lg font-bold text-white"},Ut={class:"p-4"},Lt={key:0,class:"text-center py-12"},Nt={class:"text-white/60"},Vt={key:1,class:"space-y-3"},Qt={class:"flex items-center justify-between mb-2"},zt={class:"text-white font-medium"},Ot={class:"text-white/70 text-xs mb-1"},It={class:"text-white/70 text-xs mb-1"},qt={class:"text-white/70 text-xs"},U=2,Yt={__name:"Withdraw",setup(Pt){const{t:a}=G();P(),J();const{showSuccess:L,showError:C,showWarning:N}=K(),F=y(()=>window.innerWidth<768),d=u("USDT"),v=u("ERC20"),w=u(""),h=u(""),f=u(!1),_=u(!1),p=u(!1),x=u(0),b=u([]),V=["USDT","BTC","ETH"],g=y(()=>d.value==="USDT"?["ERC20","TRC20"]:d.value==="BTC"?["BTC"]:d.value==="ETH"?["ERC20"]:[]),Q=y(()=>{const n=parseFloat(h.value)||0,e=n*(U/100);return Math.max(0,n-e)}),j=y(()=>{const n=parseFloat(h.value)||0;return w.value.trim().length>0&&n>0&&n<=x.value&&w.value.trim().indexOf(" ")===-1}),B=n=>{const e=parseFloat(n)||0;return e===0?"0.00000000":e<1e-5?e.toFixed(8):e<1?e.toFixed(6):e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:8})},z=n=>{d.value=n,f.value=!1,n==="USDT"?v.value="ERC20":n==="BTC"?v.value="BTC":n==="ETH"&&(v.value="ERC20"),T()},O=()=>{h.value=x.value.toString()},T=async()=>{var n;try{const s=(n=(await S.get("/wallet/balance",{params:{account_type:"spot"}})).data.balances)==null?void 0:n.find(c=>c.currency===d.value);x.value=(s==null?void 0:s.available)||0}catch(e){console.error("Error loading extractable quantity:",e),x.value=0}},D=async()=>{try{const n=await S.get("/wallet/withdrawals");b.value=n.data.withdrawals||[]}catch(n){console.error("Error loading withdraw history:",n),b.value=[]}},I=async()=>{var e,s;if(!j.value){C(a("withdraw.invalidInput"));return}const n=parseFloat(h.value);if(n>x.value){C(a("withdraw.insufficientBalance"));return}if(w.value.trim().indexOf(" ")!==-1){N(a("withdraw.addressWarning"));return}p.value=!0;try{await S.post("/wallet/withdraw",{currency:d.value,amount:n,address:w.value.trim(),network:v.value}),L(a("withdraw.success")),w.value="",h.value="",await T(),await D()}catch(c){console.error("Withdraw error:",c),C(((s=(e=c.response)==null?void 0:e.data)==null?void 0:s.error)||a("withdraw.error"))}finally{p.value=!1}};return q(async()=>{await T(),await D()}),(n,e)=>(l(),r("div",Z,[F.value?(l(),W(X,{key:0})):m("",!0),t("div",tt,[F.value?m("",!0):(l(),W(Y,{key:0})),t("main",et,[t("div",st,[t("div",ot,[t("div",at,[t("button",{onClick:e[0]||(e[0]=s=>n.$router.back()),class:"p-1.5 hover:bg-white/10 rounded-lg transition-colors"},[...e[9]||(e[9]=[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),t("h1",nt,o(i(a)("withdraw.title")),1)]),t("button",{onClick:e[1]||(e[1]=s=>_.value=!0),class:"text-sm text-white/70 hover:text-white transition-colors"},o(i(a)("withdraw.history")),1)])]),t("div",it,[t("div",null,[t("div",lt,[t("span",rt,o(d.value),1),t("button",{onClick:e[2]||(e[2]=s=>f.value=!0),class:"flex items-center gap-1 text-sm text-white/70 hover:text-white transition-colors"},[k(o(i(a)("withdraw.selectCurrency"))+" ",1),e[10]||(e[10]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])]),g.value.length>1?(l(),r("div",dt,[t("div",ut,[(l(!0),r(E,null,M(g.value,s=>(l(),r("button",{key:s,onClick:c=>v.value=s,class:$(["flex-1 py-2.5 px-4 rounded-lg font-medium text-sm transition-colors border",v.value===s?"bg-teal-500/20 text-teal-300 border-teal-500/50":"bg-white/5 text-white/70 border-white/10 hover:bg-white/10"])},o(s),11,ct))),128))])])):g.value.length===1?(l(),r("div",wt,[k(o(i(a)("withdraw.network"))+": ",1),t("span",ht,o(g.value[0]),1)])):m("",!0),t("div",null,[t("div",vt,o(i(a)("withdraw.extractableQuantity")),1),t("div",xt,[t("span",mt,o(B(x.value)),1),t("span",ft,o(d.value),1)])]),t("div",null,[A(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>w.value=s),type:"text",class:"w-full px-4 py-3 glass-input rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-teal-500/50",placeholder:i(a)("withdraw.enterAddress")},null,8,pt),[[R,w.value]]),t("p",_t,o(i(a)("withdraw.addressWarning")),1)]),t("div",null,[t("div",bt,o(i(a)("withdraw.amount")),1),t("div",gt,[A(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>h.value=s),type:"number",step:"0.00000001",min:"0",class:"flex-1 px-4 py-3 glass-input rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-teal-500/50",placeholder:"0"},null,512),[[R,h.value]]),t("span",yt,o(d.value),1),e[11]||(e[11]=t("div",{class:"w-px h-6 bg-white/20"},null,-1)),t("button",{onClick:O,class:"text-sm text-white/70 hover:text-white transition-colors px-2"},o(i(a)("common.all")),1)])]),t("div",kt,[k(o(i(a)("withdraw.fee"))+": ",1),t("span",Ct,o(U)+"% "+o(d.value),1)]),t("div",jt,[k(o(i(a)("withdraw.arrivedAmount"))+": ",1),t("span",Bt,o(B(Q.value))+" "+o(d.value),1)]),t("button",{onClick:I,disabled:p.value||!j.value,class:$(["w-full py-4 rounded-lg font-bold text-white text-base transition-all",j.value&&!p.value?"bg-teal-500 hover:bg-teal-600 active:bg-teal-700":"bg-white/10 text-white/50 cursor-not-allowed"])},o(p.value?i(a)("common.processing"):i(a)("withdraw.button")),11,Tt)])])]),f.value?(l(),r("div",{key:1,class:"fixed inset-0 bg-black/50 z-50 flex items-end md:items-center justify-center p-4",onClick:e[6]||(e[6]=H(s=>f.value=!1,["self"]))},[t("div",Et,[t("div",Mt,[t("h2",$t,o(i(a)("withdraw.selectCurrency")),1),t("button",{onClick:e[5]||(e[5]=s=>f.value=!1),class:"text-white/70 hover:text-white"},[...e[12]||(e[12]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",St,[(l(),r(E,null,M(V,s=>t("div",{key:s,onClick:c=>z(s),class:"flex items-center justify-between p-3 rounded-lg hover:bg-white/5 cursor-pointer transition-colors"},[t("span",Dt,o(s),1),d.value===s?(l(),r("svg",Wt,[...e[13]||(e[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):m("",!0)],8,Ft)),64))])])])):m("",!0),_.value?(l(),r("div",{key:2,class:"fixed inset-0 bg-black/50 z-50 flex items-end md:items-center justify-center p-4",onClick:e[8]||(e[8]=H(s=>_.value=!1,["self"]))},[t("div",At,[t("div",Rt,[t("h2",Ht,o(i(a)("withdraw.history")),1),t("button",{onClick:e[7]||(e[7]=s=>_.value=!1),class:"text-white/70 hover:text-white"},[...e[14]||(e[14]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Ut,[b.value.length===0?(l(),r("div",Lt,[t("p",Nt,o(i(a)("withdraw.noHistory")),1)])):(l(),r("div",Vt,[(l(!0),r(E,null,M(b.value,(s,c)=>(l(),r("div",{key:c,class:"glass-card rounded-lg p-3"},[t("div",Qt,[t("span",zt,o(s.currency),1),t("span",{class:$(["text-sm font-medium",s.status==="completed"?"text-green-400":s.status==="pending"?"text-yellow-400":"text-red-400"])},o(i(a)(`withdraw.status.${s.status}`)),3)]),t("div",Ot,o(i(a)("withdraw.amount"))+": "+o(B(s.amount))+" "+o(s.currency),1),t("div",It,o(i(a)("withdraw.address"))+": "+o(s.address),1),t("div",qt,o(new Date(s.created_at).toLocaleString()),1)]))),128))]))])])])):m("",!0)]))}};export{Yt as default};
