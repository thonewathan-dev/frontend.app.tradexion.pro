import{N as G,r as _,K as C,m as h,o as z,i as J,f as d,e as u,h as s,t as l,n as p,O as K,F as X,g as Y}from"./vendor.BJKvz4Yw.js";import{b as Z}from"./index.DnUnV9d6.js";import{g as B}from"./coinLogos.gwK95kos.js";const Q={class:"w-full"},tt={class:"grid grid-cols-1 gap-4"},et={class:"flex items-center justify-between"},st={class:"flex items-center gap-3"},ot={class:"w-10 h-10 rounded-full bg-white/5 border border-white/15 flex items-center justify-center overflow-hidden"},nt=["src","alt"],rt={key:1,class:"text-white font-bold text-sm"},it={class:"text-base font-bold text-white leading-tight"},at={class:"text-xs text-white/60"},lt={class:"mt-4"},ct={class:"h-16 w-full relative"},dt={class:"absolute inset-0 w-full h-full",viewBox:"0 0 220 64",preserveAspectRatio:"none"},ut=["d"],ht=["d"],mt={class:"mt-3 flex items-end justify-between"},bt={class:"text-right"},pt={class:"text-white font-bold text-lg"},vt={class:"glass-card-no-hover rounded-2xl border border-white/10 overflow-hidden"},xt={class:"px-5 pt-4 pb-3"},ft={class:"flex items-center justify-between"},gt={class:"flex items-center gap-6 text-sm font-semibold"},wt={class:"divide-y divide-white/10"},_t={class:"flex items-center gap-3 min-w-0"},yt=["src","alt"],St={key:1,class:"text-white text-xs font-bold"},Tt={class:"min-w-0"},Ut={class:"text-sm font-bold text-white leading-tight"},kt={class:"text-xs text-white/60 truncate"},Nt={class:"flex items-center gap-6"},Dt={class:"text-sm font-bold text-white tabular-nums"},Ft="wss://stream.binance.com:9443/ws/!ticker@arr",Pt={__name:"AuthMarketPanel",setup($t){const A=G(),y=()=>A.push("/"),S=["BTCUSDT","ETHUSDT","BNBUSDT","XRPUSDT","ADAUSDT","DOGEUSDT","LTCUSDT","ETCUSDT","BCHUSDT","DOTUSDT","NEOUSDT","IOTAUSDT","LUNAUSDT"],c=_("spot"),r=C({});S.forEach(e=>{r[e]=C({symbol:e,base:e.replace("USDT",""),price:0,change:0,volume:0})});const f=_(Array.from({length:16}).map(()=>50));let i=null,m=null;const T=_(0),L=e=>{const t=e==null?void 0:e.s;if(!t||!r[t])return;const o=r[t];if(o.price=Number(e.c??o.price)||o.price,o.change=Number(e.P??o.change)||o.change,o.volume=Number(e.q??o.volume)||o.volume,t==="BTCUSDT"){const a=Date.now();if(a-T.value>1200){T.value=a;const n=Number(e.c)||0;if(n>0){const v=f.value.slice(-19);v.push(n),f.value=v}}}},U=()=>{try{i&&i.close(),i=new WebSocket(Ft),i.onmessage=e=>{try{const t=JSON.parse(e.data);Array.isArray(t)&&t.forEach(L)}catch{}},i.onclose=()=>g(),i.onerror=()=>g()}catch{g()}},g=()=>{m||(m=setTimeout(()=>{m=null,U()},1500))},P=async()=>{var e;try{const t=await Z.get("/market/ticker/24h");(Array.isArray(t.data)?t.data:((e=t.data)==null?void 0:e.tickers)||[]).forEach(a=>{const n=a==null?void 0:a.symbol;!n||!r[n]||(r[n].price=Number(a.lastPrice??a.c??r[n].price)||r[n].price,r[n].change=Number(a.priceChangePercent??a.P??r[n].change)||r[n].change,r[n].volume=Number(a.quoteVolume??a.q??r[n].volume)||r[n].volume)})}catch{}},b=h(()=>{const e=r.BTCUSDT;return{symbol:"BTC",name:"Bitcoin",price:(e==null?void 0:e.price)||0,change:(e==null?void 0:e.change)||0}}),k=h(()=>{try{return B("BTC")}catch{return null}}),M=h(()=>{const e=f.value.filter(t=>Number(t)>0);return e.length<2?[50,50,50,50]:e}),j=h(()=>{const e=S.map(t=>r[t]).filter(Boolean).map(t=>({symbol:t.base,name:t.base,price:t.price,change:t.change,volume:t.volume,badge:t.base.slice(0,1),logo:(()=>{try{return B(t.base)}catch{return null}})(),color:"bg-white/5 border-white/15"}));return c.value==="spot"?e.slice().sort((t,o)=>(o.volume||0)-(t.volume||0)).slice(0,6):c.value==="futures"?e.slice().sort((t,o)=>Math.abs(o.change||0)-Math.abs(t.change||0)).slice(0,6):e.slice().sort((t,o)=>(o.change||0)-(t.change||0)).slice(0,6)}),N=e=>{const t=Number(e)||0;return t>=1e3?`$${t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`:t>=1?`$${t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4})}`:`$${t.toLocaleString("en-US",{minimumFractionDigits:4,maximumFractionDigits:6})}`},D=e=>{const t=Number(e)||0;return`${t>0?"+":""}${t.toFixed(2)}%`},E=e=>{const n=Math.min(...e),v=Math.max(...e),V=Math.max(1,v-n),W=(220-6*2)/(e.length-1),$=e.map((x,w)=>{const H=6+w*W,I=6+(64-6*2)*(1-(x-n)/V);return{x:H,y:I}}).map((x,w)=>`${w===0?"M":"L"} ${x.x.toFixed(2)} ${x.y.toFixed(2)}`).join(" "),q=`${$} L ${214 .toFixed(2)} ${58 .toFixed(2)} L ${6 .toFixed(2)} ${58 .toFixed(2)} Z`;return{d:$,area:q}},F=h(()=>E(M.value)),O=h(()=>F.value.d),R=h(()=>F.value.area);return z(async()=>{await P(),U()}),J(()=>{m&&(clearTimeout(m),m=null);try{i&&(i.onopen=null,i.onmessage=null,i.onerror=null,i.onclose=null,i.close(),i=null)}catch{}}),(e,t)=>(u(),d("div",Q,[s("div",tt,[s("button",{type:"button",class:"glass-card-no-hover rounded-2xl border border-white/10 p-5 text-left w-full hover:bg-white/5 transition-colors",onClick:y},[s("div",et,[s("div",st,[s("div",ot,[k.value?(u(),d("img",{key:0,src:k.value,alt:b.value.symbol,class:"w-6 h-6 object-contain"},null,8,nt)):(u(),d("span",rt,"₿"))]),s("div",null,[s("div",it,l(b.value.symbol),1),s("div",at,l(b.value.name),1)])]),t[3]||(t[3]=s("div",{class:"text-white/60 text-lg"},"›",-1))]),s("div",lt,[s("div",ct,[(u(),d("svg",dt,[t[4]||(t[4]=s("defs",null,[s("linearGradient",{id:"sparkFill",x1:"0",y1:"0",x2:"0",y2:"1"},[s("stop",{offset:"0","stop-color":"rgba(244,63,94,0.35)"}),s("stop",{offset:"1","stop-color":"rgba(244,63,94,0)"})])],-1)),s("path",{d:O.value,fill:"none",stroke:"rgba(248,113,113,1)","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},null,8,ut),s("path",{d:R.value,fill:"url(#sparkFill)"},null,8,ht)]))])]),s("div",mt,[s("div",null,[s("div",{class:p([b.value.change<0?"text-red-300":"text-emerald-300","text-2xl font-extrabold"])},l(D(b.value.change)),3),t[5]||(t[5]=s("div",{class:"text-xs text-white/50 mt-0.5"},"Price",-1))]),s("div",bt,[s("div",pt,l(N(b.value.price)),1)])])]),s("div",vt,[s("div",xt,[s("div",ft,[s("div",gt,[s("button",{type:"button",class:p(["pb-2 border-b-2 transition-colors",c.value==="spot"?"border-white text-white":"border-transparent text-white/50 hover:text-white/80"]),onClick:t[0]||(t[0]=o=>c.value="spot")}," Spot ",2),s("button",{type:"button",class:p(["pb-2 border-b-2 transition-colors",c.value==="futures"?"border-white text-white":"border-transparent text-white/50 hover:text-white/80"]),onClick:t[1]||(t[1]=o=>c.value="futures")}," Futures ",2),s("button",{type:"button",class:p(["pb-2 border-b-2 transition-colors",c.value==="new"?"border-white text-white":"border-transparent text-white/50 hover:text-white/80"]),onClick:t[2]||(t[2]=o=>c.value="new")}," New ",2)]),s("button",{type:"button",class:"text-xs text-white/50 font-semibold hover:text-white/80 transition-colors",onClick:y},[...t[6]||(t[6]=[K(" View All ",-1),s("span",{class:"text-white/40"},"›",-1)])])])]),s("div",wt,[(u(!0),d(X,null,Y(j.value,o=>(u(),d("div",{key:o.symbol,class:"px-5 py-3 flex items-center justify-between hover:bg-white/5 transition-colors"},[s("div",_t,[s("div",{class:p(["w-9 h-9 rounded-full border flex items-center justify-center",o.color])},[o.logo?(u(),d("img",{key:0,src:o.logo,alt:o.symbol,class:"w-5 h-5 object-contain"},null,8,yt)):(u(),d("span",St,l(o.badge),1))],2),s("div",Tt,[s("div",Ut,l(o.symbol),1),s("div",kt,l(o.name),1)])]),s("div",Nt,[s("div",Dt,l(N(o.price)),1),s("div",{class:p(["text-sm font-bold tabular-nums w-16 text-right",o.change<0?"text-red-300":"text-emerald-300"])},l(D(o.change)),3)])]))),128))]),t[7]||(t[7]=s("div",{class:"px-5 py-3 text-xs text-white/40"}," Market data is illustrative on auth pages. ",-1))])])]))}};export{Pt as _};
