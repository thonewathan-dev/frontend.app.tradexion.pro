import{r as n,o as w,P as _,f as p,h as e,b as g,v as k,w as y,u as C,a as S,t as h,j as T,Q as I,O as v,R as P,N as R,e as x}from"./vendor.BJKvz4Yw.js";import{a as N,b as V}from"./index.DnUnV9d6.js";import{_ as q}from"./AuthMarketPanel.Dp_fc3IN.js";import"./coinLogos.gwK95kos.js";const B="/assets/Logo-Only.Bi7kxCKJ.png",E={class:"min-h-[100dvh] overflow-hidden bg-gradient-to-br from-slate-950 via-slate-900 to-indigo-950 text-white flex flex-col"},M={class:"sticky top-0 z-10 glass-card-no-hover border-b border-white/10"},U={class:"max-w-5xl mx-auto px-4 h-14 flex items-center justify-between"},j={class:"flex items-center gap-2"},D=["src"],G={class:"flex-1 max-w-5xl mx-auto w-full px-4 pt-6 pb-8 md:pt-10 md:pb-10 md:flex md:items-center"},L={class:"grid md:grid-cols-2 gap-6 md:gap-10 items-start w-full"},O={class:"hidden md:block"},X={class:"min-w-0"},z={key:0,class:"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/20"},A={class:"text-sm text-red-400"},F={class:"glass-card-no-hover rounded-xl border border-white/12 p-6"},J=["value"],K=["disabled"],Z={__name:"GoogleInviteCode",setup(Q){const u=R(),c=_(),d=N(),m=n(""),a=n(""),l=n(!1),s=n("");w(()=>{const r=c.query.email,t=c.query.token;if(!r||!t){s.value="Invalid registration link. Please try again.";return}m.value=r,sessionStorage.setItem("google_oauth_token",t)});const b=async()=>{var r,t;if(!a.value.trim()){s.value="Please enter an invite code";return}s.value="",l.value=!0;try{const o=sessionStorage.getItem("google_oauth_token");if(!o)throw new Error("Session expired. Please try again.");const i=await V.post("/auth/google/complete-registration",{inviteCode:a.value.trim().toUpperCase(),token:o});sessionStorage.removeItem("google_oauth_token"),d.accessToken=i.data.accessToken,d.refreshToken=i.data.refreshToken,localStorage.setItem("accessToken",i.data.accessToken),localStorage.setItem("refreshToken",i.data.refreshToken),await d.fetchCurrentUser(),u.push("/")}catch(o){console.error("Complete registration error:",o),s.value=((t=(r=o.response)==null?void 0:r.data)==null?void 0:t.error)||"Failed to complete registration. Please check your invite code."}finally{l.value=!1}},f=()=>{sessionStorage.removeItem("google_oauth_token"),u.push("/register")};return(r,t)=>{const o=C("router-link");return x(),p("div",E,[e("div",M,[e("div",U,[e("div",j,[e("img",{src:k(B),alt:"TradeXion",class:"w-7 h-7 object-contain"},null,8,D),t[1]||(t[1]=e("span",{class:"font-semibold tracking-tight text-white"},"TradeXion",-1))]),g(o,{to:"/login",class:"px-4 py-1.5 rounded-full text-sm font-semibold glass-button-no-hover text-white border border-white/20 hover:border-white/30 transition-colors"},{default:y(()=>[...t[2]||(t[2]=[v(" Log In ",-1)])]),_:1})])]),e("div",G,[e("div",L,[e("div",O,[g(q)]),e("div",X,[t[6]||(t[6]=e("h1",{class:"text-2xl md:text-3xl font-bold tracking-tight mb-3 text-white"},"Complete Registration",-1)),t[7]||(t[7]=e("p",{class:"text-sm text-white/70 mb-6"},"Please enter your invite code to complete your Google account registration.",-1)),s.value?(x(),p("div",z,[e("p",A,h(s.value),1)])):S("",!0),e("div",F,[e("form",{onSubmit:T(b,["prevent"]),class:"space-y-4"},[e("div",null,[t[3]||(t[3]=e("label",{class:"block text-xs text-white/80 font-medium mb-2"},"Email",-1)),e("input",{value:m.value,type:"email",readonly:"",class:"w-full px-3 py-2.5 text-sm rounded-lg border border-white/10 bg-white/5 text-white/80 placeholder-white/40 focus:outline-none"},null,8,J)]),e("div",null,[t[4]||(t[4]=e("label",{class:"block text-xs text-white/80 font-medium mb-2"},[v("Invite Code "),e("span",{class:"text-red-400"},"*")],-1)),I(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>a.value=i),type:"text",required:"",autofocus:"",class:"w-full px-3 py-2.5 text-sm glass-input rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/20 transition-all uppercase",placeholder:"Enter invite code"},null,512),[[P,a.value,void 0,{trim:!0}]]),t[5]||(t[5]=e("p",{class:"text-xs text-white/50 mt-1"},"Invite code is required to complete registration",-1))]),e("button",{type:"submit",disabled:l.value||!a.value.trim(),class:"w-full py-2.5 text-sm rounded-full font-semibold glass-button-no-hover text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed border border-white/20"},h(l.value?"Completing Registration...":"Complete Registration"),9,K),e("button",{type:"button",onClick:f,class:"w-full py-2.5 text-sm rounded-full font-semibold border border-white/15 text-white/90 hover:bg-white/10 transition-colors"}," Cancel ")],32)])])])])])}}};export{Z as default};
