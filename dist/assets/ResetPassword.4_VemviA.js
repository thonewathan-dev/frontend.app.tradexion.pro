import{r as a,o as q,P as S,N as M,f as m,h as t,b as p,v as U,w as _,u as j,j as k,Q as b,t as v,R as g,a as I,e as x,O as P}from"./vendor.BJKvz4Yw.js";import{_ as L}from"./AuthMarketPanel.Dp_fc3IN.js";import{_ as T}from"./SiteFooter.BaLxjuH9.js";import{a as E}from"./index.DnUnV9d6.js";import"./coinLogos.gwK95kos.js";const $={class:"min-h-[100dvh] overflow-hidden bg-gradient-to-br from-slate-950 via-slate-900 to-indigo-950 text-white flex flex-col"},D={class:"sticky top-0 z-10 glass-card-no-hover border-b border-white/10"},F={class:"max-w-5xl mx-auto px-4 h-14 flex items-center justify-between"},O={class:"flex items-center gap-2"},X=["src"],z={class:"flex-1 max-w-5xl mx-auto w-full px-4 pt-6 pb-8 md:pt-10 md:pb-10 md:flex md:items-center"},A={class:"grid md:grid-cols-2 gap-6 md:gap-10 items-start w-full"},J={class:"hidden md:block"},K={class:"min-w-0"},Q={class:"glass-card-no-hover rounded-xl border border-white/12 p-3"},G={class:"text-center mb-2"},H={class:"text-white text-sm font-semibold"},W=["disabled"],Y=["disabled"],Z={class:"flex items-center gap-2 mb-1.5"},ee={key:0,class:"text-xs text-red-400"},te=["disabled"],se={class:"mt-4 text-center text-xs text-white/70"},de={__name:"ResetPassword",setup(oe){const y=M(),C=S(),h=E(),R=new URL("/assets/Logo-Only.Bi7kxCKJ.png",import.meta.url).href,d=a(""),o=a(""),l=a(""),u=a(""),c=a("code"),r=a(!1),f=a(!1),w=a("");q(()=>{const s=C.query.email;s&&typeof s=="string"?d.value=s:y.push("/forgot-password")});const V=async()=>{var e;if(!o.value||o.value.length!==6)return;w.value="",r.value=!0;const s=await h.verifyPasswordResetCode(d.value.trim(),o.value);s.success?c.value="password":(w.value=s.error,typeof window<"u"&&((e=window.__toast)!=null&&e.error)&&window.__toast.error(s.error||"Invalid or expired code"),o.value=""),r.value=!1},N=async()=>{var e,n;if(!d.value)return;f.value=!0,w.value="";const s=await h.requestPasswordReset(d.value.trim());s.success?(typeof window<"u"&&((e=window.__toast)!=null&&e.success)&&window.__toast.success("Verification code sent! Please check your email."),o.value=""):(w.value=s.error,typeof window<"u"&&((n=window.__toast)!=null&&n.error)&&window.__toast.error(s.error||"Failed to resend code")),f.value=!1},B=async()=>{var e,n,i;if(!o.value||o.value.length!==6||!l.value||l.value.length<8)return;if(l.value!==u.value){typeof window<"u"&&((e=window.__toast)!=null&&e.error)&&window.__toast.error("Passwords do not match");return}w.value="",r.value=!0;const s=await h.resetPassword(d.value.trim(),o.value,l.value);s.success?(typeof window<"u"&&((n=window.__toast)!=null&&n.success)&&window.__toast.success("Password reset successfully! Please log in with your new password."),y.push({path:"/login",query:{email:d.value.trim()}})):(w.value=s.error,typeof window<"u"&&((i=window.__toast)!=null&&i.error)&&window.__toast.error(s.error||"Failed to reset password"),s.error&&(s.error.includes("Invalid")||s.error.includes("expired")||s.error.includes("code"))&&(c.value="code",o.value="")),r.value=!1};return(s,e)=>{const n=j("router-link");return x(),m("div",$,[t("div",D,[t("div",F,[t("div",O,[t("img",{src:U(R),alt:"TrustXGlobal",class:"w-7 h-7 object-contain"},null,8,X),e[4]||(e[4]=t("span",{class:"font-semibold tracking-tight text-white"},"TrustXGlobal",-1))]),p(n,{to:"/login",class:"px-4 py-1.5 rounded-full text-sm font-semibold glass-button-no-hover text-white border border-white/20 hover:border-white/30 transition-colors"},{default:_(()=>[...e[5]||(e[5]=[P(" Log In ",-1)])]),_:1})])]),t("div",z,[t("div",A,[t("div",J,[p(L)]),t("div",K,[e[16]||(e[16]=t("h1",{class:"text-2xl md:text-3xl font-bold tracking-tight mb-3 text-white"},"Reset Password",-1)),t("div",Q,[c.value==="code"?(x(),m("form",{key:0,onSubmit:k(V,["prevent"]),class:"space-y-2.5"},[t("div",G,[e[6]||(e[6]=t("p",{class:"text-white/80 text-sm mb-1"},"Code sent to",-1)),t("p",H,v(d.value),1)]),e[7]||(e[7]=t("label",{class:"block text-xs text-white/80 font-medium text-center"},"Verification Code",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>o.value=i),type:"text",required:"",maxlength:"6",class:"w-full px-3 py-3 glass-input rounded-lg text-white text-center text-2xl tracking-[0.4em] font-bold focus:outline-none focus:ring-2 focus:ring-white/20 transition-all",placeholder:"000000",autocomplete:"one-time-code"},null,512),[[g,o.value,void 0,{trim:!0}]]),e[8]||(e[8]=t("p",{class:"text-xs text-white/50 mt-1.5 text-center"},"Enter the 6-digit code sent to your email",-1)),t("button",{type:"submit",disabled:r.value||!o.value||o.value.length!==6,class:"w-full py-2.5 text-sm rounded-full font-semibold glass-button-no-hover text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed border border-white/20"},v(r.value?"Verifying...":"Verify Code"),9,W),t("button",{type:"button",onClick:N,disabled:r.value||f.value,class:"w-full py-2.5 text-sm rounded-full font-semibold border border-white/15 text-white/90 hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},v(f.value?"Sending...":"Resend Code"),9,Y)],32)):(x(),m("form",{key:1,onSubmit:k(B,["prevent"]),class:"space-y-2.5"},[t("div",Z,[t("button",{type:"button",class:"p-1 hover:bg-white/10 rounded-lg transition-colors",onClick:e[1]||(e[1]=i=>c.value="code"),"aria-label":"Back"},[...e[9]||(e[9]=[t("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e[10]||(e[10]=t("div",{class:"flex-1 text-center text-xs font-semibold text-white truncate px-2"},"New Password",-1)),e[11]||(e[11]=t("div",{class:"w-7"},null,-1))]),e[12]||(e[12]=t("label",{class:"block text-xs text-white/80 font-medium"},"New Password",-1)),b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>l.value=i),type:"password",required:"",minlength:"8",autocomplete:"new-password",class:"w-full px-3 py-2.5 text-sm glass-input rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/20 transition-all",placeholder:"Enter new password"},null,512),[[g,l.value]]),e[13]||(e[13]=t("p",{class:"text-xs text-white/50"},"Password must be at least 8 characters long",-1)),e[14]||(e[14]=t("label",{class:"block text-xs text-white/80 font-medium"},"Confirm New Password",-1)),b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=i=>u.value=i),type:"password",required:"",minlength:"8",autocomplete:"new-password",class:"w-full px-3 py-2.5 text-sm glass-input rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/20 transition-all",placeholder:"Confirm new password"},null,512),[[g,u.value]]),u.value&&l.value!==u.value?(x(),m("p",ee,"Passwords do not match")):I("",!0),t("button",{type:"submit",disabled:r.value||!l.value||!u.value||l.value.length<8||l.value!==u.value,class:"w-full py-2.5 text-sm rounded-full font-semibold glass-button-no-hover text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed border border-white/20"},v(r.value?"Resetting...":"Reset Password"),9,te)],32))]),t("div",se,[p(n,{to:"/login",class:"font-semibold text-white hover:text-white/80"},{default:_(()=>[...e[15]||(e[15]=[P("Back to Log In",-1)])]),_:1})])])])]),p(T)])}}};export{de as default};

