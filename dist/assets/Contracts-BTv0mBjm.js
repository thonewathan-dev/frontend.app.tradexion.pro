import{l as Me,r as x,R as We,u as Qe,g as Ke,B as Je,b as u,c as te,I as N,f as e,t as r,K as h,Q as Xe,a as F,n as y,O as Ge,P as Ye,F as R,d as z,J as $e,N as E,e as Ze,S as et,o as i,L as Ae}from"./vendor-QOrkcOk8.js";import{u as tt,b as D,c as Q}from"./index-wX3mV7sr.js";import{_ as st,a as ot}from"./DesktopNav-y0IF6Y0_.js";import{S as M}from"./SkeletonLoader-DosiAcI-.js";import{g as at}from"./coinLogos-BjOeNWjs.js";import{C as Ue}from"./CustomSelect-BOoAIGx9.js";/* empty css                                                                       */const lt={class:"min-h-screen"},rt={class:"md:flex"},nt={class:"flex-1 pb-16 md:pb-0"},it={class:"px-3 py-2 border-b border-white/10"},ct={class:"mb-2"},ut={class:"text-base font-bold text-white"},dt={class:"flex items-center gap-3 py-2"},pt={class:"flex-1 text-center text-white font-semibold text-base"},vt={class:"p-2 md:p-4"},mt={key:0,class:"flex flex-row gap-2 md:gap-3 items-stretch"},xt={class:"flex-1 min-w-0 max-w-[50%] flex flex-col gap-3"},bt={class:"flex-1 min-w-0 max-w-[50%] flex flex-col gap-3"},ft={key:1,class:"flex flex-row gap-2 md:gap-3 items-stretch"},ht={class:"flex-1 min-w-0 max-w-[50%] flex flex-col h-full"},wt={class:"flex gap-2 mb-3 items-center"},gt={class:"mb-2"},yt={class:"block text-xs text-white/70 mb-1"},_t={class:"mb-2"},kt={class:"flex items-center gap-1.5"},Ct={class:"mb-2"},Tt={class:"mb-3 space-y-0.5"},St={class:"flex justify-between text-xs"},Nt={class:"text-white truncate ml-2"},Ft={class:"flex justify-between text-xs"},Bt={class:"text-white/70"},Pt={class:"text-white truncate ml-2"},Mt={class:"flex justify-between text-xs"},$t={class:"text-white truncate ml-2"},At=["disabled"],Ut={class:"flex-1 min-w-0 max-w-[50%] flex flex-col h-full"},Et={class:"flex gap-2 mb-3 items-center"},Dt={class:"flex-1 text-center"},jt={class:"text-sm md:text-base font-bold text-blue-400 truncate"},Lt={class:"mb-2"},Rt={class:"flex justify-between text-xs text-white/60 mb-1"},zt={class:"space-y-0 max-h-32 md:max-h-48 overflow-y-auto"},It=["onClick"],Ot={class:"relative z-10 text-red-400 font-medium text-xs truncate"},qt={class:"relative z-10 text-white/70 text-xs truncate"},Ht={class:"border-t border-b border-white/10 py-1.5 my-1 text-center"},Vt={class:"text-xs font-bold text-blue-400 truncate"},Wt={class:"space-y-0 max-h-32 md:max-h-48 overflow-y-auto"},Qt=["onClick"],Kt={class:"relative z-10 text-blue-400 font-medium text-xs truncate"},Jt={class:"relative z-10 text-white/70 text-xs truncate"},Xt={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center p-3",style:{"z-index":"9999 !important"}},Gt={class:"flex items-center justify-between px-4 py-3 border-b border-white/5 bg-slate-900/80"},Yt={class:"text-sm font-semibold tracking-wide text-white"},Zt={class:"flex flex-col items-center justify-center py-10 px-6 min-h-[280px]"},es={key:0,class:"relative w-28 h-28 mb-5"},ts={class:"w-28 h-28 transform -rotate-90",viewBox:"0 0 120 120"},ss=["stroke-dashoffset"],os={class:"absolute inset-0 flex items-center justify-center"},as={class:"text-center"},ls={class:"text-4xl font-semibold text-white"},rs={key:1,class:"text-center mb-5"},ns={key:2,class:"text-center mb-5"},is={class:"w-24 h-24 mx-auto mb-4 flex items-center justify-center"},cs={class:"text-center"},us={key:0,class:"w-20 h-20 mx-auto mb-2 rounded-full bg-green-500/15 flex items-center justify-center"},ds={key:1,class:"w-20 h-20 mx-auto mb-2 rounded-full bg-red-500/15 flex items-center justify-center"},ps={class:"mt-1 text-xs text-white/60 whitespace-nowrap"},vs={class:"text-base font-semibold text-blue-400"},ms={key:3,class:"text-center mb-7"},xs={class:"text-lg font-semibold text-blue-400"},bs={class:"w-full space-y-0 px-5 pb-2"},fs={class:"flex justify-between items-center py-3 border-b border-white/5"},hs={class:"flex justify-between items-center py-3 border-b border-white/5"},ws={class:"text-sm font-medium text-white"},gs={class:"flex justify-between items-center py-3 border-b border-white/5"},ys={class:"text-sm font-medium text-white"},_s={class:"flex justify-between items-center py-3"},ks={class:"text-sm text-white/60"},Cs={class:"px-4 pb-4 pt-2"},Ts={class:"mt-3"},Ss={class:"flex gap-2 mb-4 border-b border-white/10"},Ns={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 bg-green-400"},Fs={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 bg-green-400"},Bs={key:0},Ps={key:0,class:"text-center py-12"},Ms={class:"text-gray-400"},$s={key:1,class:"space-y-2"},As=["onClick"],Us={class:"flex justify-between items-start mb-2"},Es={class:"flex items-center gap-2 mb-1"},Ds={class:"text-white/70 text-xs"},js={class:"text-xs text-white/60"},Ls={class:"text-right"},Rs={key:0,class:"text-lg font-bold text-green-400"},zs={key:1,class:"text-sm text-blue-400 flex items-center justify-end gap-1"},Is={class:"text-xs text-white/60 mt-1"},Os={key:1},qs={key:0,class:"text-center py-12"},Hs={class:"text-gray-400"},Vs={key:1,class:"space-y-2"},Ws={class:"flex justify-between items-start mb-2"},Qs={class:"flex items-center gap-2 mb-1"},Ks={class:"text-white/70 text-xs"},Js={key:0,class:"flex items-center gap-1 text-xs px-2 py-0.5 rounded bg-green-500/20 text-green-400"},Xs={key:1,class:"flex items-center gap-1 text-xs px-2 py-0.5 rounded bg-red-500/20 text-red-400"},Gs={class:"text-xs text-white/60"},Ys={class:"text-right"},Zs={class:"text-xs text-white/60"},eo={class:"relative glass-card w-full md:w-96 md:max-w-md rounded-b-2xl md:rounded-b-2xl shadow-2xl max-h-[80vh] flex flex-col animate-slide-up"},to={class:"sticky top-0 glass-card-no-hover border-b border-white/10 px-4 py-4 z-10"},so={class:"flex items-center justify-between"},oo={class:"flex-1 overflow-y-auto"},ao=["onClick"],lo={class:"flex items-center gap-3 flex-1 min-w-0"},ro=["src","alt"],no={class:"text-white font-medium"},io={class:"flex items-center gap-4 flex-shrink-0"},co={class:"text-white font-medium text-sm min-w-[80px] text-right"},K="https://api.binance.com/api/v3",uo="wss://stream.binance.com:9443/ws/!ticker@arr",po=3e4,_o={__name:"Contracts",setup(vo){const{t:b}=tt(),J=We(),se=Me(()=>window.innerWidth<768),_=x((()=>{if(J.query.symbol){let s=J.query.symbol.trim();return s.includes("/")||(s=s.replace(/USDT$/,"/USDT")),s}return"BTC/USDT"})()),P=x(J.query.side==="sell"?"sell":"buy"),oe=x("USDT"),k=x(""),C=x("30"),$=x("transaction"),p=x(null),B=x({bids:[],asks:[]}),X=x(0),I=x(!1),U=x(!1),ae=x([]),G=x(!0),T=x([]),Y=x([]),f=x({}),g=x(!1),l=x(null),O={30:{minAmount:100,profitRate:10},60:{minAmount:1e3,profitRate:20},120:{minAmount:5e3,profitRate:30},180:{minAmount:2e4,profitRate:40},240:{minAmount:5e4,profitRate:50},300:{minAmount:1e5,profitRate:60}},le=["BTC","ETH","BNB","XRP","ADA","DOGE","DOT","LTC","BCH","ETC","NEO","IOTA","LUNA"];x(le.map(s=>`${s}/USDT`));const S=s=>{if(s==null)return"0.00";const t=typeof s=="string"?parseFloat(s):s;return isNaN(t)?"0.00":t>=1?t.toFixed(2):t>=.01?t.toFixed(4):t.toFixed(8)},re=s=>s?parseFloat(s).toFixed(2):"0.00",ne=s=>{},ie=(s,t)=>{if(!B.value.bids.length||!B.value.asks.length)return 0;const n=t==="bid"?B.value.bids.map(c=>parseFloat(c.quantity)):B.value.asks.map(c=>parseFloat(c.quantity)),a=Math.max(...n);return a===0?0:parseFloat(s)/a*100},Z=async()=>{G.value=!0;const s=_.value.replace("/","");try{await Promise.all([Ee(s),ce(s),ue()])}finally{G.value=!1}},Ee=async s=>{try{const t=await D.get(`/market/ticker/${s}/24h`);if(t.data&&t.data.price)p.value={...t.data,price:Number(t.data.price)||0,priceChangePercent:Number(t.data.priceChangePercent)||0,priceChange:Number(t.data.priceChange)||0,volume:Number(t.data.volume)||0,highPrice:Number(t.data.highPrice)||0,lowPrice:Number(t.data.lowPrice)||0};else try{const a=(await Q.get(`${K}/ticker/24hr`,{params:{symbol:s.toUpperCase()}})).data;p.value={price:Number(a.lastPrice)||0,priceChangePercent:Number(a.priceChangePercent)||0,priceChange:Number(a.priceChange)||0,volume:Number(a.volume)||0,highPrice:Number(a.highPrice)||0,lowPrice:Number(a.lowPrice)||0}}catch(n){console.error("Binance fallback failed:",n)}}catch(t){console.error("Error loading ticker:",t);try{const a=(await Q.get(`${K}/ticker/24hr`,{params:{symbol:s.toUpperCase()}})).data;p.value={price:Number(a.lastPrice)||0,priceChangePercent:Number(a.priceChangePercent)||0,priceChange:Number(a.priceChange)||0,volume:Number(a.volume)||0,highPrice:Number(a.highPrice)||0,lowPrice:Number(a.lowPrice)||0}}catch(n){console.error("Binance fallback failed:",n)}}},ce=async s=>{var t,n;try{const a=await D.get(`/market/orderbook/${s}`,{params:{limit:20}});if(a.data&&(((t=a.data.bids)==null?void 0:t.length)>0||((n=a.data.asks)==null?void 0:n.length)>0))B.value=a.data;else try{const c=await Q.get(`${K}/depth`,{params:{symbol:s.toUpperCase(),limit:20}});B.value={bids:(c.data.bids||[]).map(([w,m])=>({price:Number(w)||0,quantity:Number(m)||0})),asks:(c.data.asks||[]).map(([w,m])=>({price:Number(w)||0,quantity:Number(m)||0})),timestamp:Date.now()}}catch(c){console.error("Binance orderbook fallback failed:",c)}}catch(a){console.error("Error loading order book:",a);try{const c=await Q.get(`${K}/depth`,{params:{symbol:s.toUpperCase(),limit:20}});B.value={bids:(c.data.bids||[]).map(([w,m])=>({price:Number(w)||0,quantity:Number(m)||0})),asks:(c.data.asks||[]).map(([w,m])=>({price:Number(w)||0,quantity:Number(m)||0})),timestamp:Date.now()}}catch(c){console.error("Binance orderbook fallback failed:",c)}}},ue=async()=>{var s,t,n;try{console.log("[Contracts] Loading contract account balance...");const a=await D.get("/wallet/balance",{params:{account_type:"contract"}});console.log("[Contracts] Contract account balance response:",a.data);const c=(s=a.data.balances)==null?void 0:s.find(w=>w.currency==="USDT");console.log("[Contracts] USDT contract balance found:",c),X.value=(c==null?void 0:c.available)||0,console.log("[Contracts] Set walletBalance.value to:",X.value)}catch(a){console.error("[Contracts] Error loading contract account balance:",a),console.error("[Contracts] Error response:",(t=a.response)==null?void 0:t.data),console.error("[Contracts] Error status:",(n=a.response)==null?void 0:n.status)}},De=async()=>{try{const s=le.map(async n=>{try{const a=`${n}USDT`,c=await D.get(`/market/ticker/${a}/24h`);return c.data&&c.data.price?{symbol:`${n}/USDT`,price:c.data.price,change:c.data.priceChangePercent||0}:null}catch(a){return console.debug(`Failed to fetch ${n}:`,a.message),null}}),t=await Promise.all(s);ae.value=t.filter(Boolean).sort((n,a)=>n.symbol.localeCompare(a.symbol))}catch(s){console.error("Error loading coin list:",s)}},je=s=>{_.value=s,U.value=!1,Z()},Le=s=>{const t=s.split("/")[0];return at(t)||`https://via.placeholder.com/32?text=${t}`},Re=s=>{const t=s.target.alt.split("/")[0];s.target.src=`https://via.placeholder.com/32?text=${t}`},ze=async()=>{var t,n,a,c,w;if(!k.value||parseFloat(k.value)<=0){alert("Please enter a valid opening quantity");return}const s=O[C.value];if(parseFloat(k.value)<s.minAmount){alert(`Minimum amount for ${C.value}s trade is ${s.minAmount} USDT`);return}I.value=!0;try{const m=await D.post("/contracts",{symbol:_.value,side:P.value,amount:parseFloat(k.value),duration:parseInt(C.value),entry_price:((t=p.value)==null?void 0:t.price)||5e4});console.log("Trade created:",m.data),k.value="";const d=m.data.trade;if(console.log("=== TRADE CREATED ==="),console.log("Full response:",m),console.log("Response data:",m.data),console.log("Created trade:",d),d){if(l.value={id:d.id,symbol:d.symbol||_.value,side:d.side||P.value,amount:parseFloat(d.amount)||parseFloat(k.value),duration:parseInt(d.duration)||parseInt(C.value),profit_rate:parseFloat(d.profit_rate)||((n=O[C.value])==null?void 0:n.profitRate)||10,entry_price:parseFloat(d.entry_price)||parseFloat((a=p.value)==null?void 0:a.price)||5e4,expires_at:d.expires_at,status:d.status||"pending"},g.value=!0,d.expires_at){const A=new Date(d.expires_at).getTime(),V=Date.now(),W=Math.floor((A-V)/1e3);f.value[d.id]=Math.max(0,W),console.log("Countdown initialized from expires_at:",f.value[d.id],"seconds")}else if(d.duration)f.value[d.id]=Math.max(0,parseInt(d.duration)),console.log("Countdown set from duration:",d.duration);else{const A=parseInt(C.value);f.value[d.id]=Math.max(0,A),console.log("Countdown set to selected duration:",A)}await et(),console.log("=== MODAL STATE ==="),console.log("currentActiveTrade:",l.value),console.log("showActiveTradeModal:",g.value),console.log("Modal condition check:",!!l.value&&g.value),console.log("Countdown value:",f.value[d.id]),T.value.unshift(l.value)}else console.error("❌ No trade in response!"),console.error("Response:",m),console.error("Response data:",m.data),alert("Trade created but no trade data returned. Please check console.");Z(),q()}catch(m){console.error("Error creating trade:",m),alert(((w=(c=m.response)==null?void 0:c.data)==null?void 0:w.error)||"Failed to create contract trade")}I.value=!1},q=async()=>{try{const t=(await D.get("/contracts")).data.trades||[],n=Date.now();if(T.value=t.filter(a=>a.expires_at?new Date(a.expires_at).getTime()>n:!1),Y.value=t.filter(a=>a.expires_at?new Date(a.expires_at).getTime()<=n:!1),T.value.forEach(a=>{if(a.expires_at){const c=new Date(a.expires_at).getTime(),w=Math.floor((c-n)/1e3);f.value[a.id]=Math.max(0,w)}}),T.value.length>0&&!g.value&&!l.value&&(l.value=T.value[0],g.value=!0),l.value&&g.value){const a=t.find(c=>c.id===l.value.id);a&&(l.value=a)}}catch(s){console.error("Error loading contract trades:",s)}},Ie=s=>{if(s<=0)return"00:00";const t=Math.floor(s/60),n=s%60;return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`},Oe=s=>s?new Date(s).toLocaleString():"",ee=Me(()=>{if(!l.value)return 0;const s=l.value.profit_rate/100;return parseFloat(l.value.amount)*s}),qe=()=>{T.value.forEach(s=>{if(s.expires_at){const t=new Date(s.expires_at).getTime(),n=Date.now(),a=Math.floor((t-n)/1e3);f.value[s.id]=Math.max(0,a),a<=0&&f.value[s.id]===0&&setTimeout(()=>{q()},2e3)}}),l.value&&f.value[l.value.id]!==void 0&&f.value[l.value.id]<0&&(f.value[l.value.id]=0)};Qe(()=>T.value.length,(s,t)=>{s>0&&!g.value&&(l.value=T.value[0],g.value=!0)});let v=null,j=null,H=1e3;const He=s=>{if(!(s!=null&&s.s))return;const t=s.s,n=_.value.replace("/","");t===n&&p.value&&(p.value.price=Number(s.c)||p.value.price,p.value.priceChangePercent=Number(s.P)||p.value.priceChangePercent,p.value.priceChange=Number(s.p)||p.value.priceChange,p.value.volume=Number(s.v)||p.value.volume,p.value.highPrice=Number(s.h)||p.value.highPrice,p.value.lowPrice=Number(s.l)||p.value.lowPrice)},de=()=>{if((v==null?void 0:v.readyState)!==WebSocket.OPEN){try{v&&(v.onopen=null,v.onmessage=null,v.onerror=null,v.onclose=null,v.close())}catch(s){console.warn("[Contracts WS] Cleanup error:",s)}try{v=new WebSocket(uo),v.onopen=()=>{console.log("[Contracts WS] Connected"),H=1e3},v.onmessage=s=>{try{const t=JSON.parse(s.data);Array.isArray(t)&&t.forEach(He)}catch(t){console.error("[Contracts WS] Parse error:",t)}},v.onerror=s=>{console.error("[Contracts WS] Error:",s)},v.onclose=s=>{console.warn("[Contracts WS] Closed:",s.code),v=null,pe()}}catch(s){console.error("[Contracts WS] Setup error:",s),pe()}}},pe=()=>{j||(j=setTimeout(()=>{j=null,de()},H),H=Math.min(H*2,po))};return Ke(()=>{Z(),De(),de(),q();let s=!1,t=0;setInterval(async()=>{if(!s){s=!0;try{const a=_.value.replace("/","");await ce(a),t=(t+1)%5,t===0&&await ue()}catch(a){console.error("Error refreshing market data:",a)}finally{s=!1}}},2e3),setInterval(()=>{qe()},1e3);let n=!1;setInterval(async()=>{if(!n){n=!0;try{await q()}catch(a){console.error("Error loading contract trades:",a)}finally{n=!1}}},3e3)}),Je(()=>{j&&clearTimeout(j);try{v&&(v.onopen=null,v.onmessage=null,v.onerror=null,v.onclose=null,v.close())}catch{}}),(s,t)=>{var n,a,c,w,m,d,A,V,W,ve,me,xe,be,fe,he,we,ge,ye,_e,ke,Ce,Te,Se,Ne,Fe,Be,Pe;return i(),u("div",lt,[se.value?(i(),te(st,{key:0})):N("",!0),e("div",rt,[se.value?N("",!0):(i(),te(ot,{key:0})),e("main",nt,[e("div",it,[e("div",ct,[e("h1",ut,r(h(b)("contracts.title")),1)]),e("div",dt,[e("button",{onClick:t[0]||(t[0]=o=>U.value=!0),class:"p-1.5 hover:opacity-80 transition-opacity"},[...t[17]||(t[17]=[e("svg",{class:"w-5 h-5 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),e("span",pt,r(_.value),1),e("button",{onClick:t[1]||(t[1]=o=>s.$router.push({path:"/kline",query:{symbol:_.value}})),class:"p-1.5 hover:opacity-80 transition-opacity"},[...t[18]||(t[18]=[Xe('<svg class="w-5 h-5" viewBox="0 0 24 24" fill="none"><rect x="2" y="14" width="4" height="6" fill="#10B981"></rect><line x1="4" y1="12" x2="4" y2="14" stroke="#10B981" stroke-width="1.5" stroke-linecap="round"></line><line x1="4" y1="20" x2="4" y2="22" stroke="#10B981" stroke-width="1.5" stroke-linecap="round"></line><rect x="9" y="10" width="4" height="10" fill="#EF4444"></rect><line x1="11" y1="8" x2="11" y2="10" stroke="#EF4444" stroke-width="1.5" stroke-linecap="round"></line><line x1="11" y1="20" x2="11" y2="22" stroke="#EF4444" stroke-width="1.5" stroke-linecap="round"></line><rect x="16" y="14" width="4" height="6" fill="#10B981"></rect><line x1="18" y1="12" x2="18" y2="14" stroke="#10B981" stroke-width="1.5" stroke-linecap="round"></line><line x1="18" y1="20" x2="18" y2="22" stroke="#10B981" stroke-width="1.5" stroke-linecap="round"></line></svg>',1)])])])]),e("div",vt,[G.value?(i(),u("div",mt,[e("div",xt,[F(M,{type:"button"}),F(M,{type:"input"}),F(M,{type:"input"}),F(M,{type:"input"}),F(M,{type:"button"})]),e("div",bt,[F(M,{type:"button"}),F(M,{type:"order-book",rows:6}),t[19]||(t[19]=e("div",{class:"h-px bg-white/10 my-1"},null,-1)),F(M,{type:"order-book",rows:6})])])):(i(),u("div",ft,[e("div",ht,[e("div",wt,[e("button",{onClick:t[2]||(t[2]=o=>P.value="buy"),class:y(["flex-1 py-2 rounded-lg font-medium transition-colors",P.value==="buy"?"bg-green-500/20 text-green-300":"bg-white/5 text-white/60 hover:bg-white/10"])},r(h(b)("contracts.up")),3),e("button",{onClick:t[3]||(t[3]=o=>P.value="sell"),class:y(["flex-1 py-2 rounded-lg font-medium transition-colors",P.value==="sell"?"bg-red-500/20 text-red-300":"bg-white/5 text-white/60 hover:bg-white/10"])},r(h(b)("contracts.fall")),3)]),e("div",gt,[e("label",yt,r(h(b)("contracts.transactionMode")),1),F(Ue,{modelValue:oe.value,"onUpdate:modelValue":t[4]||(t[4]=o=>oe.value=o),options:[{value:"USDT",label:"USDT"},{value:"COIN",label:"COIN"}]},null,8,["modelValue"])]),e("div",_t,[t[21]||(t[21]=e("label",{class:"block text-xs text-white/70 mb-1"},"Opening quantity",-1)),e("div",kt,[Ge(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>k.value=o),type:"number",step:"0.00000001",placeholder:"0.00",class:"flex-1 min-w-0 px-2 py-1.5 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-blue-500/50 text-sm text-white"},null,512),[[Ye,k.value]]),t[20]||(t[20]=e("span",{class:"text-white/70 text-xs whitespace-nowrap flex-shrink-0"},"USDT",-1))])]),e("div",Ct,[t[22]||(t[22]=e("label",{class:"block text-xs text-white/70 mb-1"},"Open time",-1)),F(Ue,{modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=o=>C.value=o),options:[{value:"30",label:"30 sec"},{value:"60",label:"60 sec"},{value:"120",label:"120 sec"},{value:"180",label:"180 sec"},{value:"240",label:"240 sec"},{value:"300",label:"300 sec"}]},null,8,["modelValue"])]),e("div",Tt,[e("div",St,[t[23]||(t[23]=e("span",{class:"text-white/70"},"Profit rate",-1)),e("span",Nt,r(((n=O[C.value])==null?void 0:n.profitRate)||10)+"%",1)]),e("div",Ft,[e("span",Bt,r(h(b)("contracts.minimumAmount")),1),e("span",Pt,r(((a=O[C.value])==null?void 0:a.minAmount)||100)+".00 USDT",1)]),e("div",Mt,[t[24]||(t[24]=e("span",{class:"text-white/70"},"Usable",-1)),e("span",$t,r(S(X.value))+" USDT",1)])]),e("button",{onClick:ze,disabled:I.value||!k.value||parseFloat(k.value)<=0,class:y(["w-full py-2.5 rounded-lg font-bold text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm",P.value==="buy"?"bg-green-500 hover:bg-green-600 active:bg-green-700":"bg-red-500 hover:bg-red-600 active:bg-red-700"])},r(I.value?h(b)("common.processing"):`${P.value==="buy"?h(b)("contracts.up"):h(b)("contracts.fall")} ${_.value.split("/")[0]}`),11,At)]),e("div",Ut,[e("div",Et,[t[25]||(t[25]=e("div",{class:"flex-1"},null,-1)),e("div",Dt,[e("div",jt,r(S(((c=p.value)==null?void 0:c.price)||0))+" USDT",1)]),t[26]||(t[26]=e("div",{class:"flex-1"},null,-1))]),e("div",Lt,[e("div",Rt,[e("span",null,r(h(b)("contracts.price")),1),e("span",null,r(h(b)("contracts.quantity")),1)]),e("div",zt,[(i(!0),u(R,null,z(B.value.asks.slice(0,6).reverse(),(o,L)=>(i(),u("div",{key:`ask-${L}`,class:"relative flex justify-between items-center text-xs cursor-pointer hover:bg-white/5 py-0.5 px-1",onClick:Ve=>ne(o.price)},[e("div",{class:"absolute left-0 top-0 bottom-0 bg-red-500/10 transition-all",style:Ae({width:`${ie(o.quantity,"ask")}%`})},null,4),e("span",Ot,r(S(o.price)),1),e("span",qt,r(re(o.quantity)),1)],8,It))),128))])]),e("div",Ht,[e("div",Vt,r(S(((w=p.value)==null?void 0:w.price)||0))+" USDT",1)]),e("div",null,[e("div",Wt,[(i(!0),u(R,null,z(B.value.bids.slice(0,6),(o,L)=>(i(),u("div",{key:`bid-${L}`,class:"relative flex justify-between items-center text-xs cursor-pointer hover:bg-white/5 py-0.5 px-1",onClick:Ve=>ne(o.price)},[e("div",{class:"absolute left-0 top-0 bottom-0 bg-blue-500/10 transition-all",style:Ae({width:`${ie(o.quantity,"bid")}%`})},null,4),e("span",Kt,r(S(o.price)),1),e("span",Jt,r(re(o.quantity)),1)],8,Qt))),128))])])])])),(i(),te(Ze,{to:"body"},[l.value&&g.value?(i(),u("div",Xt,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[7]||(t[7]=o=>g.value=!1)}),e("div",{class:"relative bg-gradient-to-b from-slate-900 via-slate-900 to-slate-950 rounded-2xl w-full max-w-sm shadow-2xl z-[10000] border border-white/10 overflow-hidden",onClick:t[11]||(t[11]=$e(()=>{},["stop"]))},[e("div",Gt,[e("button",{onClick:t[8]||(t[8]=o=>g.value=!1),class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...t[27]||(t[27]=[e("svg",{class:"w-4 h-4 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),e("h2",Yt,r(((m=l.value)==null?void 0:m.symbol)||_.value),1),e("button",{onClick:t[9]||(t[9]=o=>g.value=!1),class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...t[28]||(t[28]=[e("svg",{class:"w-4 h-4 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Zt,[(f.value[(d=l.value)==null?void 0:d.id]||0)>0?(i(),u("div",es,[(i(),u("svg",ts,[t[29]||(t[29]=e("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"rgba(255,255,255,0.1)","stroke-width":"8"},null,-1)),e("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#3B82F6","stroke-width":"8","stroke-dasharray":"339.292","stroke-dashoffset":339.292-339.292*(f.value[(A=l.value)==null?void 0:A.id]||0)/(((V=l.value)==null?void 0:V.duration)||30),"stroke-linecap":"round",class:"transition-all duration-1000"},null,8,ss)])),e("div",os,[e("div",as,[e("div",ls,r(f.value[(W=l.value)==null?void 0:W.id]||0),1)])])])):(f.value[(ve=l.value)==null?void 0:ve.id]||0)<=0&&!((me=l.value)!=null&&me.result)?(i(),u("div",rs,[...t[30]||(t[30]=[e("div",{class:"w-24 h-24 mx-auto mb-4 flex items-center justify-center"},[e("div",{class:"text-center"},[e("svg",{class:"w-10 h-10 text-blue-400 mx-auto mb-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})]),e("div",{class:"text-sm font-medium text-blue-400"},"Analyzing trading data...")])],-1)])])):(xe=l.value)!=null&&xe.result?(i(),u("div",ns,[e("div",is,[e("div",cs,[l.value.result==="win"?(i(),u("div",us,[...t[31]||(t[31]=[e("svg",{class:"w-10 h-10 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):l.value.result==="lose"?(i(),u("div",ds,[...t[32]||(t[32]=[e("svg",{class:"w-10 h-10 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)])])):N("",!0),e("div",{class:y(["text-xl font-bold tracking-wide",{"text-green-400":l.value.result==="win","text-red-400":l.value.result==="lose"}])},r(l.value.result.toUpperCase()),3),e("div",{class:y(["text-lg font-semibold mt-2 whitespace-nowrap",{"text-green-400":parseFloat(l.value.profit_loss||0)>0,"text-red-400":parseFloat(l.value.profit_loss||0)<0}])},r(parseFloat(l.value.profit_loss||0)>0?"+":"")+r(parseFloat(l.value.profit_loss||0).toFixed(2))+" USDT ",3),e("div",ps,[t[33]||(t[33]=E(" Now price - ",-1)),e("span",vs,r(S(((be=p.value)==null?void 0:be.price)||((fe=l.value)==null?void 0:fe.entry_price)||0)),1)])])])])):N("",!0),(f.value[(he=l.value)==null?void 0:he.id]||0)>0&&!((we=l.value)!=null&&we.result)?(i(),u("div",ms,[t[34]||(t[34]=e("div",{class:"text-xs text-white/50 mb-0.5"},"Now price",-1)),e("div",xs,r(S(((ge=p.value)==null?void 0:ge.price)||((ye=l.value)==null?void 0:ye.entry_price)||0)),1)])):N("",!0),e("div",bs,[e("div",fs,[t[35]||(t[35]=e("span",{class:"text-sm text-white/60"},"Direction:",-1)),e("span",{class:y(["text-sm font-semibold",((_e=l.value)==null?void 0:_e.side)==="buy"?"text-green-400":"text-red-400"])},r(((ke=l.value)==null?void 0:ke.side)==="buy"?h(b)("contracts.up"):h(b)("contracts.fall")),3)]),e("div",hs,[t[36]||(t[36]=e("span",{class:"text-sm text-white/60"},"Opening quantity:",-1)),e("span",ws,r(parseFloat(((Ce=l.value)==null?void 0:Ce.amount)||0).toFixed(2))+" USDT",1)]),e("div",gs,[t[37]||(t[37]=e("span",{class:"text-sm text-white/60"},"Purchase price:",-1)),e("span",ys,r(S(((Te=l.value)==null?void 0:Te.entry_price)||0)),1)]),e("div",_s,[e("span",ks,r(((Se=l.value)==null?void 0:Se.status)==="completed"?"Profit and loss:":"Estimated profit and loss:"),1),e("span",{class:y(["text-sm font-semibold",((Ne=l.value)==null?void 0:Ne.status)==="completed"?parseFloat(l.value.profit_loss||0)>=0?"text-green-400":"text-red-400":ee.value>=0?"text-green-400":"text-red-400"])},r(((Fe=l.value)==null?void 0:Fe.status)==="completed"?(parseFloat(l.value.profit_loss||0)>0?"+":"")+parseFloat(l.value.profit_loss||0).toFixed(2)+" USDT":(ee.value>=0?"+":"")+ee.value.toFixed(2)+" USDT"),3)])])]),e("div",Cs,[e("button",{onClick:t[10]||(t[10]=o=>g.value=!1),class:y(["w-full py-3.5 text-white rounded-xl text-sm font-semibold transition-all shadow-lg",((Be=l.value)==null?void 0:Be.status)==="completed"?"bg-green-500/90 hover:bg-green-500 hover:shadow-green-500/50":"bg-blue-500/90 hover:bg-blue-500 hover:shadow-blue-500/50"])},r(((Pe=l.value)==null?void 0:Pe.status)==="completed"?"OK":"Back"),3)])])])):N("",!0)])),e("div",Ts,[e("div",Ss,[e("button",{onClick:t[12]||(t[12]=o=>$.value="transaction"),class:y(["px-4 py-2 text-sm font-medium transition-all relative",$.value==="transaction"?"text-green-400":"text-gray-400"])},[t[38]||(t[38]=E(" Current ",-1)),$.value==="transaction"?(i(),u("span",Ns)):N("",!0)],2),e("button",{onClick:t[13]||(t[13]=o=>$.value="closed"),class:y(["px-4 py-2 text-sm font-medium transition-all relative",$.value==="closed"?"text-green-400":"text-gray-400"])},[t[39]||(t[39]=E(" History ",-1)),$.value==="closed"?(i(),u("span",Fs)):N("",!0)],2)]),$.value==="transaction"?(i(),u("div",Bs,[T.value.length===0?(i(),u("div",Ps,[t[40]||(t[40]=e("svg",{class:"w-16 h-16 text-gray-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),e("p",Ms,r(h(b)("contracts.noHistory")),1)])):(i(),u("div",$s,[(i(!0),u(R,null,z(T.value,o=>(i(),u("div",{key:o.id,onClick:L=>{l.value=o,g.value=!0},class:"bg-white/5 rounded-lg p-3 border border-white/10 cursor-pointer hover:bg-white/10 transition-colors"},[e("div",Us,[e("div",null,[e("div",Es,[e("span",{class:y(["text-sm font-bold",o.side==="buy"?"text-green-400":"text-red-400"])},r(o.side==="buy"?h(b)("contracts.up"):h(b)("contracts.fall")),3),e("span",Ds,r(o.symbol),1)]),e("div",js,r(parseFloat(o.amount).toFixed(2))+" USDT • "+r(o.duration)+"s • "+r(o.profit_rate)+"% ",1)]),e("div",Ls,[(f.value[o.id]||0)>0?(i(),u("div",Rs,r(Ie(f.value[o.id]||0)),1)):(i(),u("div",zs,[...t[41]||(t[41]=[e("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),E(" Analyzing trading data... ",-1)])])),e("div",Is,"Entry: "+r(S(o.entry_price)),1)])])],8,As))),128))]))])):(i(),u("div",Os,[Y.value.length===0?(i(),u("div",qs,[t[42]||(t[42]=e("svg",{class:"w-16 h-16 text-gray-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),e("p",Hs,r(h(b)("contracts.noHistory")),1)])):(i(),u("div",Vs,[(i(!0),u(R,null,z(Y.value,o=>(i(),u("div",{key:o.id,class:"bg-white/5 rounded-lg p-3 border border-white/10"},[e("div",Ws,[e("div",null,[e("div",Qs,[e("span",{class:y(["text-sm font-bold",o.side==="buy"?"text-green-400":"text-red-400"])},r(o.side==="buy"?h(b)("contracts.up"):h(b)("contracts.fall")),3),e("span",Ks,r(o.symbol),1),o.result==="win"?(i(),u("span",Js,[...t[43]||(t[43]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),E(" WIN ",-1)])])):o.result==="lose"?(i(),u("span",Xs,[...t[44]||(t[44]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1),E(" LOSE ",-1)])])):N("",!0)]),e("div",Gs,r(parseFloat(o.amount).toFixed(2))+" USDT • "+r(o.duration)+"s • "+r(o.profit_rate)+"% ",1)]),e("div",Ys,[e("div",{class:y(["text-lg font-bold",{"text-green-400":parseFloat(o.profit_loss)>0,"text-red-400":parseFloat(o.profit_loss)<0,"text-white/60":parseFloat(o.profit_loss)===0}])},r(parseFloat(o.profit_loss)>0?"+":"")+r(parseFloat(o.profit_loss).toFixed(2))+" USDT ",3),e("div",Zs,r(Oe(o.created_at)),1)])])]))),128))]))]))])])])]),U.value?(i(),u("div",{key:1,class:"fixed inset-0 z-50 flex items-end md:items-center md:justify-center",onClick:t[16]||(t[16]=$e(o=>U.value=!1,["self"]))},[e("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t[14]||(t[14]=o=>U.value=!1)}),e("div",eo,[e("div",to,[e("div",so,[t[46]||(t[46]=e("h2",{class:"text-lg font-bold text-white"},"USDT",-1)),e("button",{onClick:t[15]||(t[15]=o=>U.value=!1),class:"p-2 hover:bg-white/10 rounded-full transition-colors"},[...t[45]||(t[45]=[e("svg",{class:"w-5 h-5 text-white/70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",oo,[(i(!0),u(R,null,z(ae.value,o=>(i(),u("div",{key:o.symbol,onClick:L=>je(o.symbol),class:"flex items-center justify-between px-4 py-3 hover:bg-white/5 active:bg-white/10 transition-colors cursor-pointer border-b border-white/10"},[e("div",lo,[e("img",{src:Le(o.symbol),alt:o.symbol,class:"w-8 h-8 rounded-full flex-shrink-0",onError:Re},null,40,ro),e("span",no,r(o.symbol.split("/")[0]),1)]),e("div",io,[e("span",{class:y(["text-sm font-medium",o.change>=0?"text-green-400":"text-red-400"])},r(o.change>=0?"+":"")+r(o.change.toFixed(2))+"% ",3),e("span",co,r(S(o.price)),1)])],8,ao))),128))])])])):N("",!0)])}}};export{_o as default};
